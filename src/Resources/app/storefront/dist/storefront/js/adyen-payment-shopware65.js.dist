"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(self["webpackChunk"] = self["webpackChunk"] || []).push([["adyen-payment-shopware6"],{

/***/ 35717:
/*!****************************************************************************************************!*\
  !*** ../../../../../../adyen/adyen-shopware6/src/Resources/app/storefront/src/cart/cart.plugin.js ***!
  \****************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ CartPlugin)\n/* harmony export */ });\n/* harmony import */ var src_plugin_system_plugin_class__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! src/plugin-system/plugin.class */ 56285);\n/* harmony import */ var src_helper_dom_access_helper__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! src/helper/dom-access.helper */ 63206);\n/* harmony import */ var src_service_http_client_service__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! src/service/http-client.service */ 48254);\n/* harmony import */ var src_utility_loading_indicator_element_loading_indicator_util__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! src/utility/loading-indicator/element-loading-indicator.util */ 54690);\n/*\n *                       ######\n *                       ######\n * ############    ####( ######  #####. ######  ############   ############\n * #############  #####( ######  #####. ######  #############  #############\n *        ######  #####( ######  #####. ######  #####  ######  #####  ######\n * ###### ######  #####( ######  #####. ######  #####  #####   #####  ######\n * ###### ######  #####( ######  #####. ######  #####          #####  ######\n * #############  #############  #############  #############  #####  ######\n *  ############   ############  #############   ############  #####  ######\n *                                      ######\n *                               #############\n *                               ############\n *\n * Adyen Payment Module\n *\n * Copyright (c) 2022 Adyen N.V.\n * This file is open source and available under the MIT license.\n * See the LICENSE file for more info.\n *\n */\n\n\n\n\n\nclass CartPlugin extends src_plugin_system_plugin_class__WEBPACK_IMPORTED_MODULE_0__[\"default\"] {\n  init() {\n    let self = this;\n    this._client = new src_service_http_client_service__WEBPACK_IMPORTED_MODULE_2__[\"default\"]();\n    this.adyenCheckout = Promise;\n    this.paymentMethodInstance = null;\n    this.selectedGiftcard = null;\n    this.initializeCheckoutComponent().then(function () {\n      this.observeGiftcardSelection();\n    }.bind(this));\n    this.adyenGiftcard = src_helper_dom_access_helper__WEBPACK_IMPORTED_MODULE_1__[\"default\"].querySelectorAll(document, '.adyen-giftcard');\n    this.giftcardHeader = src_helper_dom_access_helper__WEBPACK_IMPORTED_MODULE_1__[\"default\"].querySelector(document, '.adyen-giftcard-header');\n    this.giftcardComponentClose = src_helper_dom_access_helper__WEBPACK_IMPORTED_MODULE_1__[\"default\"].querySelector(document, '.adyen-close-giftcard-component');\n    this.removeGiftcardButton = src_helper_dom_access_helper__WEBPACK_IMPORTED_MODULE_1__[\"default\"].querySelector(document, '.adyen-remove-giftcard');\n    this.remainingBalanceField = src_helper_dom_access_helper__WEBPACK_IMPORTED_MODULE_1__[\"default\"].querySelector(document, '.adyen-remaining-balance');\n    this.minorUnitsQuotient = adyenGiftcardsConfiguration.totalInMinorUnits / adyenGiftcardsConfiguration.totalPrice;\n    this.giftcardDiscount = (adyenGiftcardsConfiguration.giftcardDiscount / this.minorUnitsQuotient).toFixed(2);\n    this.remainingAmount = (adyenGiftcardsConfiguration.totalPrice - this.giftcardDiscount).toFixed(2);\n    this.remainingGiftcardBalance = (adyenGiftcardsConfiguration.giftcardBalance / this.minorUnitsQuotient).toFixed(2);\n    this.shoppingCartSummaryBlock = src_helper_dom_access_helper__WEBPACK_IMPORTED_MODULE_1__[\"default\"].querySelectorAll(document, '.checkout-aside-summary-list');\n    this.offCanvasSummaryDetails = null;\n    this.shoppingCartSummaryDetails = null;\n    this.giftcardComponentClose.onclick = function (event) {\n      event.currentTarget.style.display = 'none';\n      self.selectedGiftcard = null;\n      self.giftcardHeader.innerHTML = ' ';\n      if (self.paymentMethodInstance) {\n        self.paymentMethodInstance.unmount();\n      }\n    };\n    this.removeGiftcardButton.onclick = function (event) {\n      self.removeGiftcard();\n    };\n    window.addEventListener(\"DOMContentLoaded\", event => {\n      if (parseInt(adyenGiftcardsConfiguration.giftcardDiscount, 10)) {\n        this.onGiftcardSelected();\n      }\n    });\n  }\n  async initializeCheckoutComponent() {\n    const {\n      locale,\n      clientKey,\n      environment\n    } = adyenCheckoutConfiguration;\n    const ADYEN_CHECKOUT_CONFIG = {\n      locale,\n      clientKey,\n      environment,\n      amount: {\n        currency: adyenGiftcardsConfiguration.currency,\n        value: adyenGiftcardsConfiguration.totalInMinorUnits\n      }\n    };\n    this.adyenCheckout = await AdyenCheckout(ADYEN_CHECKOUT_CONFIG);\n  }\n  observeGiftcardSelection() {\n    let self = this;\n    for (let i = 0; i < this.adyenGiftcard.length; i++) {\n      this.adyenGiftcard[i].onclick = function () {\n        self.selectedGiftcard = JSON.parse(event.currentTarget.dataset.giftcard);\n        self.mountGiftcardComponent(self.selectedGiftcard.extensions.adyenGiftcardData[0]);\n      };\n    }\n  }\n  mountGiftcardComponent(giftcard) {\n    if (this.giftcardDiscount > 0) {\n      return;\n    }\n    if (this.paymentMethodInstance) {\n      this.paymentMethodInstance.unmount();\n    }\n    src_utility_loading_indicator_element_loading_indicator_util__WEBPACK_IMPORTED_MODULE_3__[\"default\"].create(src_helper_dom_access_helper__WEBPACK_IMPORTED_MODULE_1__[\"default\"].querySelector(document, '#adyen-giftcard-component'));\n    this.giftcardHeader.innerHTML = giftcard.name;\n    this.giftcardComponentClose.style.display = 'block';\n    const giftcardConfiguration = Object.assign({}, giftcard, {\n      showPayButton: true,\n      onBalanceCheck: this.handleBalanceCheck.bind(this)\n    });\n    try {\n      this.paymentMethodInstance = this.adyenCheckout.create('giftcard', giftcardConfiguration);\n      this.paymentMethodInstance.mount('#adyen-giftcard-component');\n    } catch (e) {\n      console.log('giftcard not available');\n    }\n    src_utility_loading_indicator_element_loading_indicator_util__WEBPACK_IMPORTED_MODULE_3__[\"default\"].remove(src_helper_dom_access_helper__WEBPACK_IMPORTED_MODULE_1__[\"default\"].querySelector(document, '#adyen-giftcard-component'));\n  }\n  handleBalanceCheck(resolve, reject, data) {\n    let params = {};\n    params.paymentMethod = JSON.stringify(data.paymentMethod);\n    params.amount = JSON.stringify({\n      \"currency\": adyenGiftcardsConfiguration.currency,\n      \"value\": adyenGiftcardsConfiguration.totalInMinorUnits\n    });\n    this._client.post(`${adyenGiftcardsConfiguration.checkBalanceUrl}`, JSON.stringify(params), function (response) {\n      response = JSON.parse(response);\n      if (!response.hasOwnProperty('pspReference')) {\n        console.error(response.resultCode);\n        reject(response.resultCode);\n      } else {\n        // 0. compare balance to total amount to be paid\n        const consumableBalance = response.transactionLimit ? parseFloat(response.transactionLimit.value) : parseFloat(response.balance.value);\n        let remainingGiftcardBalanceMinorUnits = consumableBalance - adyenGiftcardsConfiguration.totalInMinorUnits;\n        if (consumableBalance >= adyenGiftcardsConfiguration.totalInMinorUnits) {\n          this.remainingGiftcardBalance = (remainingGiftcardBalanceMinorUnits / this.minorUnitsQuotient).toFixed(2);\n          this.setGiftcardAsPaymentMethod(data, remainingGiftcardBalanceMinorUnits);\n        } else {\n          this.remainingAmount = ((adyenGiftcardsConfiguration.totalInMinorUnits - consumableBalance) / this.minorUnitsQuotient).toFixed(2);\n          this.saveGiftcardStateData(data, consumableBalance.toString(), 0, this.selectedGiftcard.id);\n        }\n        this.remainingBalanceField.style.display = 'block';\n        let innerHtmlBalance = adyenGiftcardsConfiguration.translationAdyenGiftcardRemainingBalance + ': ' + adyenGiftcardsConfiguration.currencySymbol + this.remainingGiftcardBalance;\n        this.remainingBalanceField.innerHTML = innerHtmlBalance;\n      }\n    }.bind(this));\n  }\n  saveGiftcardStateData(stateData, amountInMinorUnits, balance, paymentMethodId) {\n    // save state data to database, set giftcard as payment method and proceed to checkout\n    stateData = JSON.stringify(stateData);\n    this._client.post(adyenGiftcardsConfiguration.setGiftcardUrl, JSON.stringify({\n      stateData,\n      amount: amountInMinorUnits,\n      balance,\n      paymentMethodId\n    }), function (response) {\n      response = JSON.parse(response);\n      if ('paymentMethodId' in response) {\n        this.giftcardDiscount = (amountInMinorUnits / this.minorUnitsQuotient).toFixed(2);\n        this.remainingAmount = (adyenGiftcardsConfiguration.totalPrice - this.giftcardDiscount).toFixed(2);\n        this.onGiftcardSelected();\n        src_utility_loading_indicator_element_loading_indicator_util__WEBPACK_IMPORTED_MODULE_3__[\"default\"].remove(document.body);\n      }\n    }.bind(this));\n  }\n  setGiftcardAsPaymentMethod(stateData, balance) {\n    this._client.patch(adyenGiftcardsConfiguration.switchContextUrl, JSON.stringify({\n      paymentMethodId: this.selectedGiftcard.id\n    }), function (response) {\n      this.saveGiftcardStateData(stateData, adyenGiftcardsConfiguration.totalInMinorUnits, balance, this.selectedGiftcard.id);\n    }.bind(this));\n  }\n  removeGiftcard() {\n    src_utility_loading_indicator_element_loading_indicator_util__WEBPACK_IMPORTED_MODULE_3__[\"default\"].create(document.body);\n    this._client.post(adyenGiftcardsConfiguration.removeGiftcardUrl, new FormData(), function (response) {\n      response = JSON.parse(response);\n      if ('token' in response) {\n        this.giftcardDiscount = 0;\n        this.remainingAmount = (adyenGiftcardsConfiguration.totalPrice - this.giftcardDiscount).toFixed(2);\n        if (this.shoppingCartSummaryBlock.length) {\n          let giftcardSummary = this.shoppingCartSummaryBlock[0].querySelectorAll('.adyen-giftcard-summary');\n          for (let i = 0; i < giftcardSummary.length; i++) {\n            giftcardSummary[i].remove();\n          }\n        }\n        this.removeGiftcardButton.style.display = 'none';\n        this.remainingBalanceField.style.display = 'none';\n        // Show giftcards\n        for (var i = 0; i < this.adyenGiftcard.length; i++) {\n          this.adyenGiftcard[i].style.display = '';\n        }\n        src_utility_loading_indicator_element_loading_indicator_util__WEBPACK_IMPORTED_MODULE_3__[\"default\"].remove(document.body);\n      }\n    }.bind(this));\n  }\n  appendGiftcardSummary() {\n    if (this.shoppingCartSummaryBlock.length) {\n      let innerHtmlShoppingCartSummaryDetails = '<dt class=\"col-7 checkout-aside-summary-label checkout-aside-summary-total adyen-giftcard-summary\">' + adyenGiftcardsConfiguration.translationAdyenGiftcardDiscount + '</dt>' + '<dd class=\"col-5 checkout-aside-summary-value checkout-aside-summary-total adyen-giftcard-summary\">' + adyenGiftcardsConfiguration.currencySymbol + this.giftcardDiscount + '</dd>' + '<dt class=\"col-7 checkout-aside-summary-label checkout-aside-summary-total adyen-giftcard-summary\">' + adyenGiftcardsConfiguration.translationAdyenGiftcardRemainingAmount + '</dt>' + '<dd class=\"col-5 checkout-aside-summary-value checkout-aside-summary-total adyen-giftcard-summary\">' + adyenGiftcardsConfiguration.currencySymbol + this.remainingAmount + '</dd>';\n      this.shoppingCartSummaryBlock[0].innerHTML += innerHtmlShoppingCartSummaryDetails;\n    }\n  }\n  onGiftcardSelected() {\n    // Remove component\n    if (this.paymentMethodInstance) {\n      this.paymentMethodInstance.unmount();\n    }\n    this.giftcardComponentClose.style.display = 'none';\n    // Hide giftcards\n    // this.adyenGiftcard.style.display = 'none';\n\n    for (var i = 0; i < this.adyenGiftcard.length; i++) {\n      this.adyenGiftcard[i].style.display = 'none';\n    }\n    this.giftcardHeader.innerHTML = ' ';\n    this.appendGiftcardSummary();\n    // Show Remove button\n    this.removeGiftcardButton.style.display = 'block';\n    this.remainingBalanceField.style.display = 'block';\n    let balanceInnerHtml = adyenGiftcardsConfiguration.translationAdyenGiftcardRemainingBalance + ': ' + adyenGiftcardsConfiguration.currencySymbol + this.remainingGiftcardBalance;\n    this.remainingBalanceField.innerHTML = balanceInnerHtml;\n  }\n}//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMzU3MTcuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBRUE7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBSUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUdBO0FBQ0E7QUFDQTtBQUVBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBS0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFFQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFHQTtBQUNBO0FBQ0EiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi4vLi4vLi4vLi4vLi4vLi4vYWR5ZW4vYWR5ZW4tc2hvcHdhcmU2L3NyYy9SZXNvdXJjZXMvYXBwL3N0b3JlZnJvbnQvc3JjL2NhcnQvY2FydC5wbHVnaW4uanM/OWZkNyJdLCJzb3VyY2VzQ29udGVudCI6WyIvKlxuICogICAgICAgICAgICAgICAgICAgICAgICMjIyMjI1xuICogICAgICAgICAgICAgICAgICAgICAgICMjIyMjI1xuICogIyMjIyMjIyMjIyMjICAgICMjIyMoICMjIyMjIyAgIyMjIyMuICMjIyMjIyAgIyMjIyMjIyMjIyMjICAgIyMjIyMjIyMjIyMjXG4gKiAjIyMjIyMjIyMjIyMjICAjIyMjIyggIyMjIyMjICAjIyMjIy4gIyMjIyMjICAjIyMjIyMjIyMjIyMjICAjIyMjIyMjIyMjIyMjXG4gKiAgICAgICAgIyMjIyMjICAjIyMjIyggIyMjIyMjICAjIyMjIy4gIyMjIyMjICAjIyMjIyAgIyMjIyMjICAjIyMjIyAgIyMjIyMjXG4gKiAjIyMjIyMgIyMjIyMjICAjIyMjIyggIyMjIyMjICAjIyMjIy4gIyMjIyMjICAjIyMjIyAgIyMjIyMgICAjIyMjIyAgIyMjIyMjXG4gKiAjIyMjIyMgIyMjIyMjICAjIyMjIyggIyMjIyMjICAjIyMjIy4gIyMjIyMjICAjIyMjIyAgICAgICAgICAjIyMjIyAgIyMjIyMjXG4gKiAjIyMjIyMjIyMjIyMjICAjIyMjIyMjIyMjIyMjICAjIyMjIyMjIyMjIyMjICAjIyMjIyMjIyMjIyMjICAjIyMjIyAgIyMjIyMjXG4gKiAgIyMjIyMjIyMjIyMjICAgIyMjIyMjIyMjIyMjICAjIyMjIyMjIyMjIyMjICAgIyMjIyMjIyMjIyMjICAjIyMjIyAgIyMjIyMjXG4gKiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIyMjIyMjXG4gKiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAjIyMjIyMjIyMjIyMjXG4gKiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAjIyMjIyMjIyMjIyNcbiAqXG4gKiBBZHllbiBQYXltZW50IE1vZHVsZVxuICpcbiAqIENvcHlyaWdodCAoYykgMjAyMiBBZHllbiBOLlYuXG4gKiBUaGlzIGZpbGUgaXMgb3BlbiBzb3VyY2UgYW5kIGF2YWlsYWJsZSB1bmRlciB0aGUgTUlUIGxpY2Vuc2UuXG4gKiBTZWUgdGhlIExJQ0VOU0UgZmlsZSBmb3IgbW9yZSBpbmZvLlxuICpcbiAqL1xuXG5pbXBvcnQgUGx1Z2luIGZyb20gJ3NyYy9wbHVnaW4tc3lzdGVtL3BsdWdpbi5jbGFzcyc7XG5pbXBvcnQgRG9tQWNjZXNzIGZyb20gJ3NyYy9oZWxwZXIvZG9tLWFjY2Vzcy5oZWxwZXInO1xuaW1wb3J0IEh0dHBDbGllbnQgZnJvbSAnc3JjL3NlcnZpY2UvaHR0cC1jbGllbnQuc2VydmljZSc7XG5pbXBvcnQgRWxlbWVudExvYWRpbmdJbmRpY2F0b3JVdGlsIGZyb20gJ3NyYy91dGlsaXR5L2xvYWRpbmctaW5kaWNhdG9yL2VsZW1lbnQtbG9hZGluZy1pbmRpY2F0b3IudXRpbCc7XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIENhcnRQbHVnaW4gZXh0ZW5kcyBQbHVnaW4ge1xuICAgIGluaXQoKSB7XG4gICAgICAgIGxldCBzZWxmID0gdGhpcztcblxuICAgICAgICB0aGlzLl9jbGllbnQgPSBuZXcgSHR0cENsaWVudCgpO1xuICAgICAgICB0aGlzLmFkeWVuQ2hlY2tvdXQgPSBQcm9taXNlO1xuICAgICAgICB0aGlzLnBheW1lbnRNZXRob2RJbnN0YW5jZSA9IG51bGw7XG4gICAgICAgIHRoaXMuc2VsZWN0ZWRHaWZ0Y2FyZCA9IG51bGw7XG4gICAgICAgIHRoaXMuaW5pdGlhbGl6ZUNoZWNrb3V0Q29tcG9uZW50KCkudGhlbihmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB0aGlzLm9ic2VydmVHaWZ0Y2FyZFNlbGVjdGlvbigpO1xuICAgICAgICB9LmJpbmQodGhpcykpO1xuICAgICAgICB0aGlzLmFkeWVuR2lmdGNhcmQgPSBEb21BY2Nlc3MucXVlcnlTZWxlY3RvckFsbChkb2N1bWVudCwgJy5hZHllbi1naWZ0Y2FyZCcpO1xuICAgICAgICB0aGlzLmdpZnRjYXJkSGVhZGVyID0gRG9tQWNjZXNzLnF1ZXJ5U2VsZWN0b3IoZG9jdW1lbnQsICcuYWR5ZW4tZ2lmdGNhcmQtaGVhZGVyJyk7XG4gICAgICAgIHRoaXMuZ2lmdGNhcmRDb21wb25lbnRDbG9zZSA9IERvbUFjY2Vzcy5xdWVyeVNlbGVjdG9yKGRvY3VtZW50LCAnLmFkeWVuLWNsb3NlLWdpZnRjYXJkLWNvbXBvbmVudCcpO1xuICAgICAgICB0aGlzLnJlbW92ZUdpZnRjYXJkQnV0dG9uID0gIERvbUFjY2Vzcy5xdWVyeVNlbGVjdG9yKGRvY3VtZW50LCAnLmFkeWVuLXJlbW92ZS1naWZ0Y2FyZCcpO1xuICAgICAgICB0aGlzLnJlbWFpbmluZ0JhbGFuY2VGaWVsZCA9IERvbUFjY2Vzcy5xdWVyeVNlbGVjdG9yKGRvY3VtZW50LCAnLmFkeWVuLXJlbWFpbmluZy1iYWxhbmNlJyk7XG4gICAgICAgIHRoaXMubWlub3JVbml0c1F1b3RpZW50ID0gYWR5ZW5HaWZ0Y2FyZHNDb25maWd1cmF0aW9uLnRvdGFsSW5NaW5vclVuaXRzL2FkeWVuR2lmdGNhcmRzQ29uZmlndXJhdGlvbi50b3RhbFByaWNlO1xuICAgICAgICB0aGlzLmdpZnRjYXJkRGlzY291bnQgPSAoYWR5ZW5HaWZ0Y2FyZHNDb25maWd1cmF0aW9uLmdpZnRjYXJkRGlzY291bnQgLyB0aGlzLm1pbm9yVW5pdHNRdW90aWVudCkudG9GaXhlZCgyKTtcbiAgICAgICAgdGhpcy5yZW1haW5pbmdBbW91bnQgPSAoYWR5ZW5HaWZ0Y2FyZHNDb25maWd1cmF0aW9uLnRvdGFsUHJpY2UgLSB0aGlzLmdpZnRjYXJkRGlzY291bnQpLnRvRml4ZWQoMik7XG4gICAgICAgIHRoaXMucmVtYWluaW5nR2lmdGNhcmRCYWxhbmNlID0gKGFkeWVuR2lmdGNhcmRzQ29uZmlndXJhdGlvbi5naWZ0Y2FyZEJhbGFuY2UgLyB0aGlzLm1pbm9yVW5pdHNRdW90aWVudCkudG9GaXhlZCgyKTtcblxuICAgICAgICB0aGlzLnNob3BwaW5nQ2FydFN1bW1hcnlCbG9jayA9IERvbUFjY2Vzcy5xdWVyeVNlbGVjdG9yQWxsKGRvY3VtZW50LCAnLmNoZWNrb3V0LWFzaWRlLXN1bW1hcnktbGlzdCcpO1xuICAgICAgICB0aGlzLm9mZkNhbnZhc1N1bW1hcnlEZXRhaWxzID0gbnVsbDtcbiAgICAgICAgdGhpcy5zaG9wcGluZ0NhcnRTdW1tYXJ5RGV0YWlscyA9IG51bGw7XG5cbiAgICAgICAgdGhpcy5naWZ0Y2FyZENvbXBvbmVudENsb3NlLm9uY2xpY2sgPSBmdW5jdGlvbiAoZXZlbnQpIHtcbiAgICAgICAgICAgIGV2ZW50LmN1cnJlbnRUYXJnZXQuc3R5bGUuZGlzcGxheSA9ICdub25lJztcbiAgICAgICAgICAgIHNlbGYuc2VsZWN0ZWRHaWZ0Y2FyZCA9IG51bGw7XG4gICAgICAgICAgICBzZWxmLmdpZnRjYXJkSGVhZGVyLmlubmVySFRNTCA9ICcgJztcbiAgICAgICAgICAgIGlmIChzZWxmLnBheW1lbnRNZXRob2RJbnN0YW5jZSkge1xuICAgICAgICAgICAgICAgIHNlbGYucGF5bWVudE1ldGhvZEluc3RhbmNlLnVubW91bnQoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcblxuICAgICAgICB0aGlzLnJlbW92ZUdpZnRjYXJkQnV0dG9uLm9uY2xpY2sgPSBmdW5jdGlvbiAoZXZlbnQpIHtcbiAgICAgICAgICAgIHNlbGYucmVtb3ZlR2lmdGNhcmQoKTtcbiAgICAgICAgfTtcblxuICAgICAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcihcIkRPTUNvbnRlbnRMb2FkZWRcIiwgKGV2ZW50KSA9PiB7XG4gICAgICAgICAgICBpZiAocGFyc2VJbnQoYWR5ZW5HaWZ0Y2FyZHNDb25maWd1cmF0aW9uLmdpZnRjYXJkRGlzY291bnQsIDEwKSkge1xuICAgICAgICAgICAgICAgIHRoaXMub25HaWZ0Y2FyZFNlbGVjdGVkKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIGFzeW5jIGluaXRpYWxpemVDaGVja291dENvbXBvbmVudCgpIHtcbiAgICAgICAgY29uc3QgeyBsb2NhbGUsIGNsaWVudEtleSwgZW52aXJvbm1lbnQgfSA9IGFkeWVuQ2hlY2tvdXRDb25maWd1cmF0aW9uO1xuXG4gICAgICAgIGNvbnN0IEFEWUVOX0NIRUNLT1VUX0NPTkZJRyA9IHtcbiAgICAgICAgICAgIGxvY2FsZSxcbiAgICAgICAgICAgIGNsaWVudEtleSxcbiAgICAgICAgICAgIGVudmlyb25tZW50LFxuICAgICAgICAgICAgYW1vdW50OiB7XG4gICAgICAgICAgICAgICAgY3VycmVuY3k6IGFkeWVuR2lmdGNhcmRzQ29uZmlndXJhdGlvbi5jdXJyZW5jeSxcbiAgICAgICAgICAgICAgICB2YWx1ZTogYWR5ZW5HaWZ0Y2FyZHNDb25maWd1cmF0aW9uLnRvdGFsSW5NaW5vclVuaXRzLFxuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuXG4gICAgICAgIHRoaXMuYWR5ZW5DaGVja291dCA9IGF3YWl0IEFkeWVuQ2hlY2tvdXQoQURZRU5fQ0hFQ0tPVVRfQ09ORklHKTtcbiAgICB9XG5cbiAgICBvYnNlcnZlR2lmdGNhcmRTZWxlY3Rpb24oKSB7XG4gICAgICAgIGxldCBzZWxmID0gdGhpcztcblxuICAgICAgICBmb3IgKGxldCBpPTA7IGkgPCB0aGlzLmFkeWVuR2lmdGNhcmQubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIHRoaXMuYWR5ZW5HaWZ0Y2FyZFtpXS5vbmNsaWNrID0gZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgc2VsZi5zZWxlY3RlZEdpZnRjYXJkID0gSlNPTi5wYXJzZShldmVudC5jdXJyZW50VGFyZ2V0LmRhdGFzZXQuZ2lmdGNhcmQpO1xuICAgICAgICAgICAgICAgIHNlbGYubW91bnRHaWZ0Y2FyZENvbXBvbmVudChzZWxmLnNlbGVjdGVkR2lmdGNhcmQuZXh0ZW5zaW9ucy5hZHllbkdpZnRjYXJkRGF0YVswXSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBtb3VudEdpZnRjYXJkQ29tcG9uZW50KGdpZnRjYXJkKSB7XG4gICAgICAgIGlmICh0aGlzLmdpZnRjYXJkRGlzY291bnQgPiAwKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRoaXMucGF5bWVudE1ldGhvZEluc3RhbmNlKSB7XG4gICAgICAgICAgICB0aGlzLnBheW1lbnRNZXRob2RJbnN0YW5jZS51bm1vdW50KCk7XG4gICAgICAgIH1cbiAgICAgICAgRWxlbWVudExvYWRpbmdJbmRpY2F0b3JVdGlsLmNyZWF0ZShEb21BY2Nlc3MucXVlcnlTZWxlY3Rvcihkb2N1bWVudCwgJyNhZHllbi1naWZ0Y2FyZC1jb21wb25lbnQnKSk7XG4gICAgICAgIHRoaXMuZ2lmdGNhcmRIZWFkZXIuaW5uZXJIVE1MID0gZ2lmdGNhcmQubmFtZTtcbiAgICAgICAgdGhpcy5naWZ0Y2FyZENvbXBvbmVudENsb3NlLnN0eWxlLmRpc3BsYXkgPSAnYmxvY2snO1xuICAgICAgICBjb25zdCBnaWZ0Y2FyZENvbmZpZ3VyYXRpb24gPSBPYmplY3QuYXNzaWduKHt9LCBnaWZ0Y2FyZCwge1xuICAgICAgICAgICAgc2hvd1BheUJ1dHRvbjogdHJ1ZSxcbiAgICAgICAgICAgIG9uQmFsYW5jZUNoZWNrOiB0aGlzLmhhbmRsZUJhbGFuY2VDaGVjay5iaW5kKHRoaXMpLFxuICAgICAgICB9KTtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIHRoaXMucGF5bWVudE1ldGhvZEluc3RhbmNlID0gdGhpcy5hZHllbkNoZWNrb3V0LmNyZWF0ZSgnZ2lmdGNhcmQnLCBnaWZ0Y2FyZENvbmZpZ3VyYXRpb24pO1xuICAgICAgICAgICAgdGhpcy5wYXltZW50TWV0aG9kSW5zdGFuY2UubW91bnQoJyNhZHllbi1naWZ0Y2FyZC1jb21wb25lbnQnKTtcbiAgICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICAgICAgY29uc29sZS5sb2coJ2dpZnRjYXJkIG5vdCBhdmFpbGFibGUnKTtcbiAgICAgICAgfVxuICAgICAgICBFbGVtZW50TG9hZGluZ0luZGljYXRvclV0aWwucmVtb3ZlKERvbUFjY2Vzcy5xdWVyeVNlbGVjdG9yKGRvY3VtZW50LCAnI2FkeWVuLWdpZnRjYXJkLWNvbXBvbmVudCcpKTtcbiAgICB9XG5cbiAgICBoYW5kbGVCYWxhbmNlQ2hlY2socmVzb2x2ZSwgcmVqZWN0LCBkYXRhKSB7XG4gICAgICAgIGxldCBwYXJhbXMgPSB7fTtcbiAgICAgICAgcGFyYW1zLnBheW1lbnRNZXRob2QgPSBKU09OLnN0cmluZ2lmeShkYXRhLnBheW1lbnRNZXRob2QpO1xuICAgICAgICBwYXJhbXMuYW1vdW50ID0gSlNPTi5zdHJpbmdpZnkoe1xuICAgICAgICAgICAgXCJjdXJyZW5jeVwiOmFkeWVuR2lmdGNhcmRzQ29uZmlndXJhdGlvbi5jdXJyZW5jeSxcbiAgICAgICAgICAgIFwidmFsdWVcIjogYWR5ZW5HaWZ0Y2FyZHNDb25maWd1cmF0aW9uLnRvdGFsSW5NaW5vclVuaXRzXG4gICAgICAgIH0pO1xuICAgICAgICB0aGlzLl9jbGllbnQucG9zdChcbiAgICAgICAgICAgIGAke2FkeWVuR2lmdGNhcmRzQ29uZmlndXJhdGlvbi5jaGVja0JhbGFuY2VVcmx9YCxcbiAgICAgICAgICAgIEpTT04uc3RyaW5naWZ5KHBhcmFtcyksXG4gICAgICAgICAgICBmdW5jdGlvbiAocmVzcG9uc2UpIHtcbiAgICAgICAgICAgICAgICByZXNwb25zZSA9IEpTT04ucGFyc2UocmVzcG9uc2UpO1xuICAgICAgICAgICAgICAgIGlmICghcmVzcG9uc2UuaGFzT3duUHJvcGVydHkoJ3BzcFJlZmVyZW5jZScpKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IocmVzcG9uc2UucmVzdWx0Q29kZSk7XG4gICAgICAgICAgICAgICAgICAgIHJlamVjdChyZXNwb25zZS5yZXN1bHRDb2RlKTtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAvLyAwLiBjb21wYXJlIGJhbGFuY2UgdG8gdG90YWwgYW1vdW50IHRvIGJlIHBhaWRcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgY29uc3VtYWJsZUJhbGFuY2UgPSByZXNwb25zZS50cmFuc2FjdGlvbkxpbWl0ID8gcGFyc2VGbG9hdChyZXNwb25zZS50cmFuc2FjdGlvbkxpbWl0LnZhbHVlKSA6IHBhcnNlRmxvYXQocmVzcG9uc2UuYmFsYW5jZS52YWx1ZSk7XG4gICAgICAgICAgICAgICAgICAgIGxldCByZW1haW5pbmdHaWZ0Y2FyZEJhbGFuY2VNaW5vclVuaXRzID0gKGNvbnN1bWFibGVCYWxhbmNlIC0gYWR5ZW5HaWZ0Y2FyZHNDb25maWd1cmF0aW9uLnRvdGFsSW5NaW5vclVuaXRzKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGNvbnN1bWFibGVCYWxhbmNlID49IGFkeWVuR2lmdGNhcmRzQ29uZmlndXJhdGlvbi50b3RhbEluTWlub3JVbml0cykge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5yZW1haW5pbmdHaWZ0Y2FyZEJhbGFuY2UgPSAocmVtYWluaW5nR2lmdGNhcmRCYWxhbmNlTWlub3JVbml0cyAvIHRoaXMubWlub3JVbml0c1F1b3RpZW50KS50b0ZpeGVkKDIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zZXRHaWZ0Y2FyZEFzUGF5bWVudE1ldGhvZChkYXRhLCByZW1haW5pbmdHaWZ0Y2FyZEJhbGFuY2VNaW5vclVuaXRzKTtcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucmVtYWluaW5nQW1vdW50ID0gKChhZHllbkdpZnRjYXJkc0NvbmZpZ3VyYXRpb24udG90YWxJbk1pbm9yVW5pdHMgLSBjb25zdW1hYmxlQmFsYW5jZSkgLyB0aGlzLm1pbm9yVW5pdHNRdW90aWVudCkudG9GaXhlZCgyKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc2F2ZUdpZnRjYXJkU3RhdGVEYXRhKGRhdGEsIGNvbnN1bWFibGVCYWxhbmNlLnRvU3RyaW5nKCksIDAsIHRoaXMuc2VsZWN0ZWRHaWZ0Y2FyZC5pZCk7XG4gICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICB0aGlzLnJlbWFpbmluZ0JhbGFuY2VGaWVsZC5zdHlsZS5kaXNwbGF5ID0gJ2Jsb2NrJztcbiAgICAgICAgICAgICAgICAgICAgbGV0IGlubmVySHRtbEJhbGFuY2UgPSBhZHllbkdpZnRjYXJkc0NvbmZpZ3VyYXRpb24udHJhbnNsYXRpb25BZHllbkdpZnRjYXJkUmVtYWluaW5nQmFsYW5jZSArICc6ICcgK1xuICAgICAgICAgICAgICAgICAgICAgICAgYWR5ZW5HaWZ0Y2FyZHNDb25maWd1cmF0aW9uLmN1cnJlbmN5U3ltYm9sICsgdGhpcy5yZW1haW5pbmdHaWZ0Y2FyZEJhbGFuY2U7XG5cbiAgICAgICAgICAgICAgICAgICAgdGhpcy5yZW1haW5pbmdCYWxhbmNlRmllbGQuaW5uZXJIVE1MID0gaW5uZXJIdG1sQmFsYW5jZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9LmJpbmQodGhpcylcbiAgICAgICAgKTtcbiAgICB9XG5cbiAgICBzYXZlR2lmdGNhcmRTdGF0ZURhdGEoc3RhdGVEYXRhLCBhbW91bnRJbk1pbm9yVW5pdHMsIGJhbGFuY2UsIHBheW1lbnRNZXRob2RJZCkge1xuICAgICAgICAvLyBzYXZlIHN0YXRlIGRhdGEgdG8gZGF0YWJhc2UsIHNldCBnaWZ0Y2FyZCBhcyBwYXltZW50IG1ldGhvZCBhbmQgcHJvY2VlZCB0byBjaGVja291dFxuICAgICAgICBzdGF0ZURhdGEgPSBKU09OLnN0cmluZ2lmeShzdGF0ZURhdGEpO1xuICAgICAgICB0aGlzLl9jbGllbnQucG9zdChhZHllbkdpZnRjYXJkc0NvbmZpZ3VyYXRpb24uc2V0R2lmdGNhcmRVcmwsIEpTT04uc3RyaW5naWZ5KHsgc3RhdGVEYXRhLCBhbW91bnQ6IGFtb3VudEluTWlub3JVbml0cywgYmFsYW5jZSwgcGF5bWVudE1ldGhvZElkIH0pLCBmdW5jdGlvbiAocmVzcG9uc2UpIHtcbiAgICAgICAgICAgIHJlc3BvbnNlID0gSlNPTi5wYXJzZShyZXNwb25zZSk7XG4gICAgICAgICAgICBpZiAoJ3BheW1lbnRNZXRob2RJZCcgaW4gcmVzcG9uc2UpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmdpZnRjYXJkRGlzY291bnQgPSAoYW1vdW50SW5NaW5vclVuaXRzIC8gdGhpcy5taW5vclVuaXRzUXVvdGllbnQpLnRvRml4ZWQoMik7XG4gICAgICAgICAgICAgICAgdGhpcy5yZW1haW5pbmdBbW91bnQgPSAoYWR5ZW5HaWZ0Y2FyZHNDb25maWd1cmF0aW9uLnRvdGFsUHJpY2UgLSB0aGlzLmdpZnRjYXJkRGlzY291bnQpLnRvRml4ZWQoMik7XG4gICAgICAgICAgICAgICAgdGhpcy5vbkdpZnRjYXJkU2VsZWN0ZWQoKTtcbiAgICAgICAgICAgICAgICBFbGVtZW50TG9hZGluZ0luZGljYXRvclV0aWwucmVtb3ZlKGRvY3VtZW50LmJvZHkpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9LmJpbmQodGhpcykpO1xuICAgIH1cblxuICAgIHNldEdpZnRjYXJkQXNQYXltZW50TWV0aG9kKHN0YXRlRGF0YSwgYmFsYW5jZSkge1xuICAgICAgICB0aGlzLl9jbGllbnQucGF0Y2goYWR5ZW5HaWZ0Y2FyZHNDb25maWd1cmF0aW9uLnN3aXRjaENvbnRleHRVcmwsIEpTT04uc3RyaW5naWZ5KHtwYXltZW50TWV0aG9kSWQ6IHRoaXMuc2VsZWN0ZWRHaWZ0Y2FyZC5pZH0pLCBmdW5jdGlvbiAocmVzcG9uc2UpIHtcbiAgICAgICAgICAgIHRoaXMuc2F2ZUdpZnRjYXJkU3RhdGVEYXRhKHN0YXRlRGF0YSwgYWR5ZW5HaWZ0Y2FyZHNDb25maWd1cmF0aW9uLnRvdGFsSW5NaW5vclVuaXRzLCBiYWxhbmNlLCB0aGlzLnNlbGVjdGVkR2lmdGNhcmQuaWQpXG4gICAgICAgIH0uYmluZCh0aGlzKSk7XG4gICAgfVxuXG4gICAgcmVtb3ZlR2lmdGNhcmQoKSB7XG4gICAgICAgIEVsZW1lbnRMb2FkaW5nSW5kaWNhdG9yVXRpbC5jcmVhdGUoZG9jdW1lbnQuYm9keSk7XG4gICAgICAgIHRoaXMuX2NsaWVudC5wb3N0KGFkeWVuR2lmdGNhcmRzQ29uZmlndXJhdGlvbi5yZW1vdmVHaWZ0Y2FyZFVybCwgbmV3IEZvcm1EYXRhLCBmdW5jdGlvbihyZXNwb25zZSkge1xuICAgICAgICAgICAgcmVzcG9uc2UgPSBKU09OLnBhcnNlKHJlc3BvbnNlKTtcbiAgICAgICAgICAgIGlmICgndG9rZW4nIGluIHJlc3BvbnNlKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5naWZ0Y2FyZERpc2NvdW50ID0gMDtcbiAgICAgICAgICAgICAgICB0aGlzLnJlbWFpbmluZ0Ftb3VudCA9IChhZHllbkdpZnRjYXJkc0NvbmZpZ3VyYXRpb24udG90YWxQcmljZSAtIHRoaXMuZ2lmdGNhcmREaXNjb3VudCkudG9GaXhlZCgyKTtcblxuICAgICAgICAgICAgICAgIGlmICh0aGlzLnNob3BwaW5nQ2FydFN1bW1hcnlCbG9jay5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgICAgICAgbGV0IGdpZnRjYXJkU3VtbWFyeSA9IHRoaXMuc2hvcHBpbmdDYXJ0U3VtbWFyeUJsb2NrWzBdLnF1ZXJ5U2VsZWN0b3JBbGwoJy5hZHllbi1naWZ0Y2FyZC1zdW1tYXJ5Jyk7XG4gICAgICAgICAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgZ2lmdGNhcmRTdW1tYXJ5Lmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBnaWZ0Y2FyZFN1bW1hcnlbaV0ucmVtb3ZlKCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgdGhpcy5yZW1vdmVHaWZ0Y2FyZEJ1dHRvbi5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnO1xuICAgICAgICAgICAgICAgIHRoaXMucmVtYWluaW5nQmFsYW5jZUZpZWxkLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7XG4gICAgICAgICAgICAgICAgLy8gU2hvdyBnaWZ0Y2FyZHNcbiAgICAgICAgICAgICAgICBmb3IodmFyIGk9MDtpPHRoaXMuYWR5ZW5HaWZ0Y2FyZC5sZW5ndGg7aSsrKXtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5hZHllbkdpZnRjYXJkW2ldLnN0eWxlLmRpc3BsYXkgPSAnJztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgRWxlbWVudExvYWRpbmdJbmRpY2F0b3JVdGlsLnJlbW92ZShkb2N1bWVudC5ib2R5KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfS5iaW5kKHRoaXMpKTtcbiAgICB9XG5cbiAgICBhcHBlbmRHaWZ0Y2FyZFN1bW1hcnkoKSB7XG4gICAgICAgIGlmKHRoaXMuc2hvcHBpbmdDYXJ0U3VtbWFyeUJsb2NrLmxlbmd0aCkge1xuICAgICAgICAgICAgbGV0IGlubmVySHRtbFNob3BwaW5nQ2FydFN1bW1hcnlEZXRhaWxzID0gJzxkdCBjbGFzcz1cImNvbC03IGNoZWNrb3V0LWFzaWRlLXN1bW1hcnktbGFiZWwgY2hlY2tvdXQtYXNpZGUtc3VtbWFyeS10b3RhbCBhZHllbi1naWZ0Y2FyZC1zdW1tYXJ5XCI+JyArIGFkeWVuR2lmdGNhcmRzQ29uZmlndXJhdGlvbi50cmFuc2xhdGlvbkFkeWVuR2lmdGNhcmREaXNjb3VudCArICc8L2R0PicgK1xuICAgICAgICAgICAgICAgICc8ZGQgY2xhc3M9XCJjb2wtNSBjaGVja291dC1hc2lkZS1zdW1tYXJ5LXZhbHVlIGNoZWNrb3V0LWFzaWRlLXN1bW1hcnktdG90YWwgYWR5ZW4tZ2lmdGNhcmQtc3VtbWFyeVwiPicgKyBhZHllbkdpZnRjYXJkc0NvbmZpZ3VyYXRpb24uY3VycmVuY3lTeW1ib2wgKyB0aGlzLmdpZnRjYXJkRGlzY291bnQgKyAnPC9kZD4nICtcbiAgICAgICAgICAgICAgICAnPGR0IGNsYXNzPVwiY29sLTcgY2hlY2tvdXQtYXNpZGUtc3VtbWFyeS1sYWJlbCBjaGVja291dC1hc2lkZS1zdW1tYXJ5LXRvdGFsIGFkeWVuLWdpZnRjYXJkLXN1bW1hcnlcIj4nICsgYWR5ZW5HaWZ0Y2FyZHNDb25maWd1cmF0aW9uLnRyYW5zbGF0aW9uQWR5ZW5HaWZ0Y2FyZFJlbWFpbmluZ0Ftb3VudCArICc8L2R0PicgK1xuICAgICAgICAgICAgICAgICc8ZGQgY2xhc3M9XCJjb2wtNSBjaGVja291dC1hc2lkZS1zdW1tYXJ5LXZhbHVlIGNoZWNrb3V0LWFzaWRlLXN1bW1hcnktdG90YWwgYWR5ZW4tZ2lmdGNhcmQtc3VtbWFyeVwiPicgKyBhZHllbkdpZnRjYXJkc0NvbmZpZ3VyYXRpb24uY3VycmVuY3lTeW1ib2wgKyB0aGlzLnJlbWFpbmluZ0Ftb3VudCArICc8L2RkPic7XG5cbiAgICAgICAgICAgIHRoaXMuc2hvcHBpbmdDYXJ0U3VtbWFyeUJsb2NrWzBdLmlubmVySFRNTCArPSBpbm5lckh0bWxTaG9wcGluZ0NhcnRTdW1tYXJ5RGV0YWlscztcbiAgICAgICAgfVxuICAgIH1cblxuICAgIG9uR2lmdGNhcmRTZWxlY3RlZCgpIHtcbiAgICAgICAgLy8gUmVtb3ZlIGNvbXBvbmVudFxuICAgICAgICBpZiAodGhpcy5wYXltZW50TWV0aG9kSW5zdGFuY2UpIHtcbiAgICAgICAgICAgIHRoaXMucGF5bWVudE1ldGhvZEluc3RhbmNlLnVubW91bnQoKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLmdpZnRjYXJkQ29tcG9uZW50Q2xvc2Uuc3R5bGUuZGlzcGxheSA9ICdub25lJztcbiAgICAgICAgLy8gSGlkZSBnaWZ0Y2FyZHNcbiAgICAgICAgLy8gdGhpcy5hZHllbkdpZnRjYXJkLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7XG5cbiAgICAgICAgZm9yKHZhciBpPTA7aTx0aGlzLmFkeWVuR2lmdGNhcmQubGVuZ3RoO2krKyl7XG4gICAgICAgICAgICB0aGlzLmFkeWVuR2lmdGNhcmRbaV0uc3R5bGUuZGlzcGxheSA9ICdub25lJztcbiAgICAgICAgfVxuXG4gICAgICAgIHRoaXMuZ2lmdGNhcmRIZWFkZXIuaW5uZXJIVE1MID0gJyAnO1xuXG4gICAgICAgIHRoaXMuYXBwZW5kR2lmdGNhcmRTdW1tYXJ5KCk7XG4gICAgICAgIC8vIFNob3cgUmVtb3ZlIGJ1dHRvblxuICAgICAgICB0aGlzLnJlbW92ZUdpZnRjYXJkQnV0dG9uLnN0eWxlLmRpc3BsYXkgPSAnYmxvY2snO1xuICAgICAgICB0aGlzLnJlbWFpbmluZ0JhbGFuY2VGaWVsZC5zdHlsZS5kaXNwbGF5ID0gJ2Jsb2NrJ1xuXG4gICAgICAgIGxldCBiYWxhbmNlSW5uZXJIdG1sID0gYWR5ZW5HaWZ0Y2FyZHNDb25maWd1cmF0aW9uLnRyYW5zbGF0aW9uQWR5ZW5HaWZ0Y2FyZFJlbWFpbmluZ0JhbGFuY2UgKyAnOiAnICtcbiAgICAgICAgICAgIGFkeWVuR2lmdGNhcmRzQ29uZmlndXJhdGlvbi5jdXJyZW5jeVN5bWJvbCArIHRoaXMucmVtYWluaW5nR2lmdGNhcmRCYWxhbmNlXG5cbiAgICAgICAgdGhpcy5yZW1haW5pbmdCYWxhbmNlRmllbGQuaW5uZXJIVE1MID0gYmFsYW5jZUlubmVySHRtbDtcbiAgICB9XG59XG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///35717\n");

/***/ }),

/***/ 64429:
/*!*****************************************************************************************************************!*\
  !*** ../../../../../../adyen/adyen-shopware6/src/Resources/app/storefront/src/checkout/confirm-order.plugin.js ***!
  \*****************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ ConfirmOrderPlugin)\n/* harmony export */ });\n/* harmony import */ var src_plugin_system_plugin_class__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! src/plugin-system/plugin.class */ 56285);\n/* harmony import */ var src_helper_dom_access_helper__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! src/helper/dom-access.helper */ 63206);\n/* harmony import */ var src_service_http_client_service__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! src/service/http-client.service */ 48254);\n/* harmony import */ var src_utility_form_form_serialize_util__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! src/utility/form/form-serialize.util */ 40836);\n/* harmony import */ var src_utility_loading_indicator_element_loading_indicator_util__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! src/utility/loading-indicator/element-loading-indicator.util */ 54690);\n/* harmony import */ var _configuration_adyen__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../configuration/adyen */ 68645);\n/*\n *                       ######\n *                       ######\n * ############    ####( ######  #####. ######  ############   ############\n * #############  #####( ######  #####. ######  #############  #############\n *        ######  #####( ######  #####. ######  #####  ######  #####  ######\n * ###### ######  #####( ######  #####. ######  #####  #####   #####  ######\n * ###### ######  #####( ######  #####. ######  #####          #####  ######\n * #############  #############  #############  #############  #####  ######\n *  ############   ############  #############   ############  #####  ######\n *                                      ######\n *                               #############\n *                               ############\n *\n * Adyen Payment Module\n *\n * Copyright (c) 2020 Adyen B.V.\n * This file is open source and available under the MIT license.\n * See the LICENSE file for more info.\n *\n */\n\n\n\n\n\n\n\n\n/* global adyenCheckoutOptions, adyenCheckoutConfiguration, AdyenCheckout */\n/* eslint-disable no-unused-vars */\nclass ConfirmOrderPlugin extends src_plugin_system_plugin_class__WEBPACK_IMPORTED_MODULE_0__[\"default\"] {\n  init() {\n    this._client = new src_service_http_client_service__WEBPACK_IMPORTED_MODULE_2__[\"default\"]();\n    this.selectedAdyenPaymentMethod = this.getSelectedPaymentMethodKey();\n    this.confirmOrderForm = src_helper_dom_access_helper__WEBPACK_IMPORTED_MODULE_1__[\"default\"].querySelector(document, '#confirmOrderForm');\n    this.confirmFormSubmit = src_helper_dom_access_helper__WEBPACK_IMPORTED_MODULE_1__[\"default\"].querySelector(document, '#confirmOrderForm button[type=\"submit\"]');\n    this.shoppingCartSummaryBlock = src_helper_dom_access_helper__WEBPACK_IMPORTED_MODULE_1__[\"default\"].querySelectorAll(document, '.checkout-aside-summary-list');\n    this.minorUnitsQuotient = adyenCheckoutOptions.amount / adyenCheckoutOptions.totalPrice;\n    this.giftcardDiscount = (adyenCheckoutOptions.giftcardDiscount / this.minorUnitsQuotient).toFixed(2);\n    this.remainingAmount = (adyenCheckoutOptions.totalPrice - this.giftcardDiscount).toFixed(2);\n    this.responseHandler = this.handlePaymentAction;\n    this.adyenCheckout = Promise;\n    this.initializeCheckoutComponent().then(function () {\n      // Non adyen payment method selected\n      // this can not happen, because this js plugin is registered only if adyen methods selected\n      // PluginManager.register('ConfirmOrderPlugin', ConfirmOrderPlugin, '#adyen-payment-checkout-mask');\n      if (adyenCheckoutOptions.selectedPaymentMethodPluginId !== adyenCheckoutOptions.adyenPluginId) {\n        return;\n      }\n      if (!adyenCheckoutOptions || !adyenCheckoutOptions.paymentStatusUrl || !adyenCheckoutOptions.checkoutOrderUrl || !adyenCheckoutOptions.paymentHandleUrl) {\n        console.error('Adyen payment configuration missing.');\n        return;\n      }\n      if (this.selectedAdyenPaymentMethod in _configuration_adyen__WEBPACK_IMPORTED_MODULE_5__[\"default\"].componentsWithPayButton) {\n        // replaces confirm button with adyen pay button for paywithgoogle, applepay etc.\n        this.initializeCustomPayButton();\n      }\n      if (_configuration_adyen__WEBPACK_IMPORTED_MODULE_5__[\"default\"].updatablePaymentMethods.includes(this.selectedAdyenPaymentMethod) && !this.stateData) {\n        // create inline component for cards etc. and set event listener for submit button to confirm payment component\n        this.renderPaymentComponent(this.selectedAdyenPaymentMethod);\n      } else {\n        this.confirmFormSubmit.addEventListener('click', this.onConfirmOrderSubmit.bind(this));\n      }\n    }.bind(this));\n    if (parseInt(adyenCheckoutOptions.payInFullWithGiftcard, 10)) {\n      if (parseInt(adyenCheckoutOptions.adyenGiftcardSelected, 10)) {\n        this.appendGiftcardSummary();\n      }\n    } else {\n      this.appendGiftcardSummary();\n    }\n  }\n  async initializeCheckoutComponent() {\n    const {\n      locale,\n      clientKey,\n      environment,\n      merchantAccount\n    } = adyenCheckoutConfiguration;\n    const paymentMethodsResponse = adyenCheckoutOptions.paymentMethodsResponse;\n    const ADYEN_CHECKOUT_CONFIG = {\n      locale,\n      clientKey,\n      environment,\n      showPayButton: this.selectedAdyenPaymentMethod in _configuration_adyen__WEBPACK_IMPORTED_MODULE_5__[\"default\"].componentsWithPayButton,\n      hasHolderName: true,\n      paymentMethodsResponse: JSON.parse(paymentMethodsResponse),\n      onAdditionalDetails: this.handleOnAdditionalDetails.bind(this),\n      countryCode: activeShippingAddress.country,\n      paymentMethodsConfiguration: {\n        card: {\n          hasHolderName: true,\n          clickToPayConfiguration: {\n            merchantDisplayName: merchantAccount,\n            shopperEmail: shopperDetails.shopperEmail\n          }\n        }\n      }\n    };\n    this.adyenCheckout = await AdyenCheckout(ADYEN_CHECKOUT_CONFIG);\n  }\n  handleOnAdditionalDetails(state) {\n    this._client.post(`${adyenCheckoutOptions.paymentDetailsUrl}`, JSON.stringify({\n      orderId: this.orderId,\n      stateData: JSON.stringify(state.data)\n    }), function (paymentResponse) {\n      if (this._client._request.status !== 200) {\n        location.href = this.errorUrl.toString();\n        return;\n      }\n      this.responseHandler(paymentResponse);\n    }.bind(this));\n  }\n  onConfirmOrderSubmit(event) {\n    const form = src_helper_dom_access_helper__WEBPACK_IMPORTED_MODULE_1__[\"default\"].querySelector(document, '#confirmOrderForm');\n    if (!form.checkValidity()) {\n      return;\n    }\n    event.preventDefault();\n    src_utility_loading_indicator_element_loading_indicator_util__WEBPACK_IMPORTED_MODULE_4__[\"default\"].create(document.body);\n    const formData = src_utility_form_form_serialize_util__WEBPACK_IMPORTED_MODULE_3__[\"default\"].serialize(form);\n    this.confirmOrder(formData);\n  }\n  renderPaymentComponent(type) {\n    if (type === 'oneclick') {\n      this.renderStoredPaymentMethodComponents();\n      return;\n    }\n\n    // Get the payment method object from paymentMethodsResponse\n    let paymentMethodConfigs = this.adyenCheckout.paymentMethodsResponse.paymentMethods.filter(function (paymentMethod) {\n      return paymentMethod['type'] === type;\n    });\n    if (paymentMethodConfigs.length === 0) {\n      if (this.adyenCheckout.options.environment === 'test') {\n        console.error('Payment method configuration not found. ', type);\n      }\n      return;\n    }\n    let paymentMethod = paymentMethodConfigs[0];\n\n    // Mount payment method instance\n    this.mountPaymentComponent(paymentMethod, false);\n  }\n  renderStoredPaymentMethodComponents() {\n    // Iterate through and render the stored payment methods\n    const storedPaymentMethods = this.adyenCheckout.paymentMethodsResponse.storedPaymentMethods;\n    // Mount payment method instance\n    storedPaymentMethods.forEach(paymentMethod => {\n      let selector = `[data-adyen-stored-payment-method-id=\"${paymentMethod.id}\"]`;\n      this.mountPaymentComponent(paymentMethod, true, selector);\n    });\n    this.hideStorePaymentMethodComponents();\n    let selectedId = null;\n    let storedPaymentMethodFields = src_helper_dom_access_helper__WEBPACK_IMPORTED_MODULE_1__[\"default\"].querySelectorAll(document, '[name=adyenStoredPaymentMethodId]');\n    storedPaymentMethodFields.forEach(field => {\n      if (!selectedId) {\n        selectedId = field.value;\n      }\n      field.addEventListener('change', this.showSelectedStoredPaymentMethod.bind(this));\n    });\n    this.showSelectedStoredPaymentMethod(null, selectedId);\n  }\n  showSelectedStoredPaymentMethod(event, selectedId = null) {\n    // Only show the component for the selected stored payment method\n    this.hideStorePaymentMethodComponents();\n    selectedId = event ? event.target.value : selectedId;\n    let selector = `[data-adyen-stored-payment-method-id=\"${selectedId}\"]`;\n    let component = src_helper_dom_access_helper__WEBPACK_IMPORTED_MODULE_1__[\"default\"].querySelector(document, selector);\n    component.style.display = 'block';\n  }\n  hideStorePaymentMethodComponents() {\n    let storedPaymentComponents = src_helper_dom_access_helper__WEBPACK_IMPORTED_MODULE_1__[\"default\"].querySelectorAll(document, '.stored-payment-component');\n    storedPaymentComponents.forEach(component => {\n      component.style.display = 'none';\n    });\n  }\n  confirmOrder(formData, extraParams = {}) {\n    const orderId = adyenCheckoutOptions.orderId;\n    formData.set('affiliateCode', adyenCheckoutOptions.affiliateCode);\n    formData.set('campaignCode', adyenCheckoutOptions.campaignCode);\n    if (!!orderId) {\n      //Only used if the order is being edited\n      this.updatePayment(formData, orderId, extraParams);\n    } else {\n      this.createOrder(formData, extraParams);\n    }\n  }\n  updatePayment(formData, orderId, extraParams) {\n    formData.set('orderId', orderId);\n    this._client.post(adyenCheckoutOptions.updatePaymentUrl, formData, this.afterSetPayment.bind(this, extraParams));\n  }\n  createOrder(formData, extraParams) {\n    if (parseInt(adyenCheckoutOptions.giftcardDiscount, 10) && !parseInt(adyenCheckoutOptions.payInFullWithGiftcard, 10)) {\n      // create Adyen order for partial payments\n      this._client.post(adyenCheckoutOptions.createOrderUrl, JSON.stringify({\n        orderAmount: adyenCheckoutOptions.amount,\n        currency: adyenCheckoutOptions.currency\n      }), function (response) {\n        const adyenOrder = JSON.parse(response);\n        if (adyenOrder.resultCode === 'Success') {\n          extraParams = Object.assign(extraParams, {\n            order: adyenOrder\n          });\n        }\n\n        // create shopware order\n        this._client.post(adyenCheckoutOptions.checkoutOrderUrl, formData, this.afterCreateOrder.bind(this, extraParams));\n      }.bind(this));\n    } else {\n      this._client.post(adyenCheckoutOptions.checkoutOrderUrl, formData, this.afterCreateOrder.bind(this, extraParams));\n    }\n  }\n  afterCreateOrder(extraParams = {}, response) {\n    let order;\n    try {\n      order = JSON.parse(response);\n    } catch (error) {\n      src_utility_loading_indicator_element_loading_indicator_util__WEBPACK_IMPORTED_MODULE_4__[\"default\"].remove(document.body);\n      console.log('Error: invalid response from Shopware API', response);\n      return;\n    }\n    this.orderId = order.id;\n    this.finishUrl = new URL(location.origin + adyenCheckoutOptions.paymentFinishUrl);\n    this.finishUrl.searchParams.set('orderId', order.id);\n    this.errorUrl = new URL(location.origin + adyenCheckoutOptions.paymentErrorUrl);\n    this.errorUrl.searchParams.set('orderId', order.id);\n    let params = {\n      'orderId': this.orderId,\n      'finishUrl': this.finishUrl.toString(),\n      'errorUrl': this.errorUrl.toString()\n    };\n    // Append any extra parameters passed, e.g. stateData\n    for (const property in extraParams) {\n      params[property] = extraParams[property];\n    }\n    this._client.post(adyenCheckoutOptions.paymentHandleUrl, JSON.stringify(params), this.afterPayOrder.bind(this, this.orderId));\n  }\n  afterSetPayment(extraParams = {}, response) {\n    try {\n      const responseObject = JSON.parse(response);\n      if (responseObject.success) {\n        this.afterCreateOrder(extraParams, JSON.stringify({\n          id: adyenCheckoutOptions.orderId\n        }));\n      }\n    } catch (e) {\n      src_utility_loading_indicator_element_loading_indicator_util__WEBPACK_IMPORTED_MODULE_4__[\"default\"].remove(document.body);\n      console.log('Error: invalid response from Shopware API', response);\n      return;\n    }\n  }\n  afterPayOrder(orderId, response) {\n    try {\n      response = JSON.parse(response);\n      this.returnUrl = response.redirectUrl;\n    } catch (e) {\n      src_utility_loading_indicator_element_loading_indicator_util__WEBPACK_IMPORTED_MODULE_4__[\"default\"].remove(document.body);\n      console.log('Error: invalid response from Shopware API', response);\n      return;\n    }\n\n    // If payment call returns the errorUrl, then no need to proceed further.\n    // Redirect to error page.\n    if (this.returnUrl === this.errorUrl.toString()) {\n      location.href = this.returnUrl;\n    }\n    try {\n      this._client.post(`${adyenCheckoutOptions.paymentStatusUrl}`, JSON.stringify({\n        'orderId': orderId\n      }), this.responseHandler.bind(this));\n    } catch (e) {\n      console.log(e);\n    }\n  }\n  handlePaymentAction(response) {\n    try {\n      const paymentResponse = JSON.parse(response);\n      if (paymentResponse.isFinal || paymentResponse.action.type === 'voucher') {\n        location.href = this.returnUrl;\n      }\n      if (!!paymentResponse.action) {\n        const actionModalConfiguration = {};\n        if (paymentResponse.action.type === 'threeDS2') {\n          actionModalConfiguration.challengeWindowSize = '05';\n        }\n        this.adyenCheckout.createFromAction(paymentResponse.action, actionModalConfiguration).mount('[data-adyen-payment-action-container]');\n        const modalActionTypes = ['threeDS2', 'qrCode'];\n        if (modalActionTypes.includes(paymentResponse.action.type)) {\n          if (window.jQuery) {\n            // Bootstrap v4 support\n            $('[data-adyen-payment-action-modal]').modal({\n              show: true\n            });\n          } else {\n            // Bootstrap v5 support\n            var adyenPaymentModal = new bootstrap.Modal(document.getElementById('adyen-payment-action-modal'), {\n              keyboard: false\n            });\n            adyenPaymentModal.show();\n          }\n        }\n      }\n    } catch (e) {\n      console.log(e);\n    }\n  }\n  initializeCustomPayButton() {\n    const componentConfig = _configuration_adyen__WEBPACK_IMPORTED_MODULE_5__[\"default\"].componentsWithPayButton[this.selectedAdyenPaymentMethod];\n    this.completePendingPayment(this.selectedAdyenPaymentMethod, componentConfig);\n\n    // get selected payment method object\n    let selectedPaymentMethod = this.adyenCheckout.paymentMethodsResponse.paymentMethods.filter(item => item.type === this.selectedAdyenPaymentMethod);\n\n    /*\n     * If the PM is GooglePay in Shopware, check for the `paywithgoogle` tx_variant also in paymentMethods response.\n     * This block should be remove after depreating the `paywithgoogle` tx_variant.\n     */\n    // TODO: Following block will be removed after the deprecation of the `paywithgoogle` tx_variant.\n    if (selectedPaymentMethod.length < 1 && this.selectedAdyenPaymentMethod === 'googlepay') {\n      selectedPaymentMethod = this.adyenCheckout.paymentMethodsResponse.paymentMethods.filter(item => item.type === 'paywithgoogle');\n    }\n    if (selectedPaymentMethod.length < 1) {\n      return;\n    }\n    let selectedPaymentMethodObject = selectedPaymentMethod[0];\n    if (!adyenCheckoutOptions.amount) {\n      console.error('Failed to fetch Cart/Order total amount.');\n      return;\n    }\n    if (!!componentConfig.prePayRedirect) {\n      this.renderPrePaymentButton(componentConfig, selectedPaymentMethodObject);\n      return;\n    }\n    const PAY_BUTTON_CONFIG = Object.assign(componentConfig.extra, selectedPaymentMethodObject, {\n      amount: {\n        value: adyenCheckoutOptions.amount,\n        currency: adyenCheckoutOptions.currency\n      },\n      data: {\n        personalDetails: shopperDetails,\n        billingAddress: activeBillingAddress,\n        deliveryAddress: activeShippingAddress\n      },\n      onClick: (resolve, reject) => {\n        if (!componentConfig.onClick(resolve, reject, this)) {\n          return false;\n        }\n        src_utility_loading_indicator_element_loading_indicator_util__WEBPACK_IMPORTED_MODULE_4__[\"default\"].create(document.body);\n      },\n      onSubmit: function (state, component) {\n        if (state.isValid) {\n          let extraParams = {\n            stateData: JSON.stringify(state.data)\n          };\n          let formData = src_utility_form_form_serialize_util__WEBPACK_IMPORTED_MODULE_3__[\"default\"].serialize(this.confirmOrderForm);\n          // Set a custom response action handler if available.\n          if ('responseHandler' in componentConfig) {\n            this.responseHandler = componentConfig.responseHandler.bind(component, this);\n          }\n          this.confirmOrder(formData, extraParams);\n        } else {\n          component.showValidation();\n          if (this.adyenCheckout.options.environment === 'test') {\n            console.log('Payment failed: ', state);\n          }\n        }\n      }.bind(this),\n      onCancel: (data, component) => {\n        src_utility_loading_indicator_element_loading_indicator_util__WEBPACK_IMPORTED_MODULE_4__[\"default\"].remove(document.body);\n        componentConfig.onCancel(data, component, this);\n      },\n      onError: (error, component) => {\n        if (component.props.name === 'PayPal' && error.name === 'CANCEL') {\n          this._client.post(`${adyenCheckoutOptions.cancelOrderTransactionUrl}`, JSON.stringify({\n            orderId: this.orderId\n          }));\n        }\n        src_utility_loading_indicator_element_loading_indicator_util__WEBPACK_IMPORTED_MODULE_4__[\"default\"].remove(document.body);\n        componentConfig.onError(error, component, this);\n        console.log(error);\n      }\n    });\n    const paymentMethodInstance = this.adyenCheckout.create(selectedPaymentMethodObject.type, PAY_BUTTON_CONFIG);\n    try {\n      if ('isAvailable' in paymentMethodInstance) {\n        paymentMethodInstance.isAvailable().then(function () {\n          this.mountCustomPayButton(paymentMethodInstance);\n        }.bind(this)).catch(e => {\n          console.log(selectedPaymentMethodObject.type + ' is not available', e);\n        });\n      } else {\n        this.mountCustomPayButton(paymentMethodInstance);\n      }\n    } catch (e) {\n      console.log(e);\n    }\n  }\n  renderPrePaymentButton(componentConfig, selectedPaymentMethodObject) {\n    if (selectedPaymentMethodObject.type === 'amazonpay') {\n      componentConfig.extra = this.setAddressDetails(componentConfig.extra);\n    }\n    const PRE_PAY_BUTTON = Object.assign(componentConfig.extra, selectedPaymentMethodObject, {\n      configuration: selectedPaymentMethodObject.configuration,\n      amount: {\n        value: adyenCheckoutOptions.amount,\n        currency: adyenCheckoutOptions.currency\n      },\n      onClick: (resolve, reject) => {\n        if (!componentConfig.onClick(resolve, reject, this)) {\n          return false;\n        }\n        src_utility_loading_indicator_element_loading_indicator_util__WEBPACK_IMPORTED_MODULE_4__[\"default\"].create(document.body);\n      },\n      onError: (error, component) => {\n        src_utility_loading_indicator_element_loading_indicator_util__WEBPACK_IMPORTED_MODULE_4__[\"default\"].remove(document.body);\n        componentConfig.onError(error, component, this);\n        console.log(error);\n      }\n    });\n    let paymentMethodInstance = this.adyenCheckout.create(selectedPaymentMethodObject.type, PRE_PAY_BUTTON);\n    this.mountCustomPayButton(paymentMethodInstance);\n  }\n  completePendingPayment(paymentMethodType, config) {\n    const url = new URL(location.href);\n    // Check for pending payment session\n    if (url.searchParams.has(config.sessionKey)) {\n      src_utility_loading_indicator_element_loading_indicator_util__WEBPACK_IMPORTED_MODULE_4__[\"default\"].create(document.body);\n      const paymentMethodInstance = this.adyenCheckout.create(paymentMethodType, {\n        [config.sessionKey]: url.searchParams.get(config.sessionKey),\n        showOrderButton: false,\n        onSubmit: function (state, component) {\n          if (state.isValid) {\n            let extraParams = {\n              stateData: JSON.stringify(state.data)\n            };\n            let formData = src_utility_form_form_serialize_util__WEBPACK_IMPORTED_MODULE_3__[\"default\"].serialize(this.confirmOrderForm);\n            this.confirmOrder(formData, extraParams);\n          }\n        }.bind(this)\n      });\n      this.mountCustomPayButton(paymentMethodInstance);\n      paymentMethodInstance.submit();\n    }\n  }\n  getSelectedPaymentMethodKey() {\n    return Object.keys(_configuration_adyen__WEBPACK_IMPORTED_MODULE_5__[\"default\"].paymentMethodTypeHandlers).find(key => _configuration_adyen__WEBPACK_IMPORTED_MODULE_5__[\"default\"].paymentMethodTypeHandlers[key] === adyenCheckoutOptions.selectedPaymentMethodHandler);\n  }\n  mountCustomPayButton(paymentMethodInstance) {\n    let form = document.querySelector('#confirmOrderForm');\n    if (form) {\n      let submitButton = form.querySelector('button[type=submit]');\n      if (submitButton && !submitButton.disabled) {\n        let confirmButtonContainer = document.createElement('div');\n        confirmButtonContainer.id = 'adyen-confirm-button';\n        confirmButtonContainer.setAttribute('data-adyen-confirm-button', '');\n        form.appendChild(confirmButtonContainer);\n        paymentMethodInstance.mount(confirmButtonContainer);\n        submitButton.remove();\n      }\n    }\n  }\n  mountPaymentComponent(paymentMethod, isOneClick = false, selector = null) {\n    const configuration = Object.assign({}, paymentMethod, {\n      data: {\n        personalDetails: shopperDetails,\n        billingAddress: activeBillingAddress,\n        deliveryAddress: activeShippingAddress\n      },\n      onSubmit: function (state, component) {\n        if (state.isValid) {\n          let extraParams = {\n            stateData: JSON.stringify(state.data)\n          };\n          let formData = src_utility_form_form_serialize_util__WEBPACK_IMPORTED_MODULE_3__[\"default\"].serialize(this.confirmOrderForm);\n          src_utility_loading_indicator_element_loading_indicator_util__WEBPACK_IMPORTED_MODULE_4__[\"default\"].create(document.body);\n          this.confirmOrder(formData, extraParams);\n        } else {\n          component.showValidation();\n          if (this.adyenCheckout.options.environment === 'test') {\n            console.log('Payment failed: ', state);\n          }\n        }\n      }.bind(this)\n    });\n    if (!isOneClick && paymentMethod.type === 'scheme' && adyenCheckoutOptions.displaySaveCreditCardOption) {\n      configuration.enableStoreDetails = true;\n    }\n    let componentSelector = isOneClick ? selector : '#' + this.el.id;\n    try {\n      const paymentMethodInstance = this.adyenCheckout.create(paymentMethod.type, configuration);\n      paymentMethodInstance.mount(componentSelector);\n      this.confirmFormSubmit.addEventListener('click', function (event) {\n        const form = src_helper_dom_access_helper__WEBPACK_IMPORTED_MODULE_1__[\"default\"].querySelector(document, '#confirmOrderForm');\n        if (!form.checkValidity()) {\n          return;\n        }\n        event.preventDefault();\n        this.el.parentNode.scrollIntoView({\n          behavior: \"smooth\",\n          block: \"start\"\n        });\n        paymentMethodInstance.submit();\n      }.bind(this));\n    } catch (err) {\n      console.error(paymentMethod.type, err);\n      return false;\n    }\n  }\n  appendGiftcardSummary() {\n    if (parseInt(adyenCheckoutOptions.giftcardDiscount, 10) && this.shoppingCartSummaryBlock.length) {\n      let shoppingCartSummaryDetails = '<dt class=\"col-7 checkout-aside-summary-label checkout-aside-summary-total adyen-giftcard-summary\">' + adyenCheckoutOptions.translationAdyenGiftcardDiscount + '</dt>' + '<dd class=\"col-5 checkout-aside-summary-value checkout-aside-summary-total adyen-giftcard-summary\">' + adyenCheckoutOptions.currencySymbol + this.giftcardDiscount + '</dd>' + '<dt class=\"col-7 checkout-aside-summary-label checkout-aside-summary-total adyen-giftcard-summary\">' + adyenCheckoutOptions.translationAdyenGiftcardRemainingAmount + '</dt>' + '<dd class=\"col-5 checkout-aside-summary-value checkout-aside-summary-total adyen-giftcard-summary\">' + adyenCheckoutOptions.currencySymbol + this.remainingAmount + '</dd>';\n      this.shoppingCartSummaryBlock[0].innerHTML += shoppingCartSummaryDetails;\n    }\n  }\n\n  /**\n   * Set the address details based on the passed data in confirm-payment twig file\n   * If no phone number is linked to customer, do not set addressDetails and update Product Type\n   *\n   * @param extra\n   */\n  setAddressDetails(extra) {\n    if (activeShippingAddress.phoneNumber !== '') {\n      extra.addressDetails = {\n        name: shopperDetails.firstName + ' ' + shopperDetails.lastName,\n        addressLine1: activeShippingAddress.street,\n        city: activeShippingAddress.city,\n        postalCode: activeShippingAddress.postalCode,\n        countryCode: activeShippingAddress.country,\n        phoneNumber: activeShippingAddress.phoneNumber\n      };\n    } else {\n      extra.productType = 'PayOnly';\n    }\n    return extra;\n  }\n}//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiNjQ0MjkuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7OztBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBRUE7QUFFQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFFQTtBQUNBO0FBRUE7QUFBQTtBQUFBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBRUE7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUVBO0FBS0E7QUFFQTtBQUNBO0FBSUE7QUFDQTtBQUVBO0FBQUE7QUFBQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBS0E7QUFFQTtBQUNBO0FBS0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFFQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUtBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUVBO0FBQUE7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUVBO0FBRUE7O0FBRUE7QUFDQTs7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQUE7QUFFQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUtBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBSUE7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUlBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFjQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0EiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi4vLi4vLi4vLi4vLi4vLi4vYWR5ZW4vYWR5ZW4tc2hvcHdhcmU2L3NyYy9SZXNvdXJjZXMvYXBwL3N0b3JlZnJvbnQvc3JjL2NoZWNrb3V0L2NvbmZpcm0tb3JkZXIucGx1Z2luLmpzPzg3YzUiXSwic291cmNlc0NvbnRlbnQiOlsiLypcbiAqICAgICAgICAgICAgICAgICAgICAgICAjIyMjIyNcbiAqICAgICAgICAgICAgICAgICAgICAgICAjIyMjIyNcbiAqICMjIyMjIyMjIyMjIyAgICAjIyMjKCAjIyMjIyMgICMjIyMjLiAjIyMjIyMgICMjIyMjIyMjIyMjIyAgICMjIyMjIyMjIyMjI1xuICogIyMjIyMjIyMjIyMjIyAgIyMjIyMoICMjIyMjIyAgIyMjIyMuICMjIyMjIyAgIyMjIyMjIyMjIyMjIyAgIyMjIyMjIyMjIyMjI1xuICogICAgICAgICMjIyMjIyAgIyMjIyMoICMjIyMjIyAgIyMjIyMuICMjIyMjIyAgIyMjIyMgICMjIyMjIyAgIyMjIyMgICMjIyMjI1xuICogIyMjIyMjICMjIyMjIyAgIyMjIyMoICMjIyMjIyAgIyMjIyMuICMjIyMjIyAgIyMjIyMgICMjIyMjICAgIyMjIyMgICMjIyMjI1xuICogIyMjIyMjICMjIyMjIyAgIyMjIyMoICMjIyMjIyAgIyMjIyMuICMjIyMjIyAgIyMjIyMgICAgICAgICAgIyMjIyMgICMjIyMjI1xuICogIyMjIyMjIyMjIyMjIyAgIyMjIyMjIyMjIyMjIyAgIyMjIyMjIyMjIyMjIyAgIyMjIyMjIyMjIyMjIyAgIyMjIyMgICMjIyMjI1xuICogICMjIyMjIyMjIyMjIyAgICMjIyMjIyMjIyMjIyAgIyMjIyMjIyMjIyMjIyAgICMjIyMjIyMjIyMjIyAgIyMjIyMgICMjIyMjI1xuICogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICMjIyMjI1xuICogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIyMjIyMjIyMjIyMjI1xuICogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIyMjIyMjIyMjIyMjXG4gKlxuICogQWR5ZW4gUGF5bWVudCBNb2R1bGVcbiAqXG4gKiBDb3B5cmlnaHQgKGMpIDIwMjAgQWR5ZW4gQi5WLlxuICogVGhpcyBmaWxlIGlzIG9wZW4gc291cmNlIGFuZCBhdmFpbGFibGUgdW5kZXIgdGhlIE1JVCBsaWNlbnNlLlxuICogU2VlIHRoZSBMSUNFTlNFIGZpbGUgZm9yIG1vcmUgaW5mby5cbiAqXG4gKi9cblxuaW1wb3J0IFBsdWdpbiBmcm9tICdzcmMvcGx1Z2luLXN5c3RlbS9wbHVnaW4uY2xhc3MnO1xuaW1wb3J0IERvbUFjY2VzcyBmcm9tICdzcmMvaGVscGVyL2RvbS1hY2Nlc3MuaGVscGVyJztcbmltcG9ydCBIdHRwQ2xpZW50IGZyb20gJ3NyYy9zZXJ2aWNlL2h0dHAtY2xpZW50LnNlcnZpY2UnO1xuaW1wb3J0IEZvcm1TZXJpYWxpemVVdGlsIGZyb20gJ3NyYy91dGlsaXR5L2Zvcm0vZm9ybS1zZXJpYWxpemUudXRpbCc7XG5pbXBvcnQgRWxlbWVudExvYWRpbmdJbmRpY2F0b3JVdGlsIGZyb20gJ3NyYy91dGlsaXR5L2xvYWRpbmctaW5kaWNhdG9yL2VsZW1lbnQtbG9hZGluZy1pbmRpY2F0b3IudXRpbCc7XG5pbXBvcnQgYWR5ZW5Db25maWd1cmF0aW9uIGZyb20gJy4uL2NvbmZpZ3VyYXRpb24vYWR5ZW4nO1xuXG4vKiBnbG9iYWwgYWR5ZW5DaGVja291dE9wdGlvbnMsIGFkeWVuQ2hlY2tvdXRDb25maWd1cmF0aW9uLCBBZHllbkNoZWNrb3V0ICovXG4vKiBlc2xpbnQtZGlzYWJsZSBuby11bnVzZWQtdmFycyAqL1xuZXhwb3J0IGRlZmF1bHQgY2xhc3MgQ29uZmlybU9yZGVyUGx1Z2luIGV4dGVuZHMgUGx1Z2luIHtcblxuICAgIGluaXQoKSB7XG4gICAgICAgIHRoaXMuX2NsaWVudCA9IG5ldyBIdHRwQ2xpZW50KCk7XG4gICAgICAgIHRoaXMuc2VsZWN0ZWRBZHllblBheW1lbnRNZXRob2QgPSB0aGlzLmdldFNlbGVjdGVkUGF5bWVudE1ldGhvZEtleSgpO1xuICAgICAgICB0aGlzLmNvbmZpcm1PcmRlckZvcm0gPSBEb21BY2Nlc3MucXVlcnlTZWxlY3Rvcihkb2N1bWVudCwgJyNjb25maXJtT3JkZXJGb3JtJyk7XG4gICAgICAgIHRoaXMuY29uZmlybUZvcm1TdWJtaXQgPSBEb21BY2Nlc3MucXVlcnlTZWxlY3Rvcihkb2N1bWVudCwgJyNjb25maXJtT3JkZXJGb3JtIGJ1dHRvblt0eXBlPVwic3VibWl0XCJdJyk7XG4gICAgICAgIHRoaXMuc2hvcHBpbmdDYXJ0U3VtbWFyeUJsb2NrID0gRG9tQWNjZXNzLnF1ZXJ5U2VsZWN0b3JBbGwoZG9jdW1lbnQsICcuY2hlY2tvdXQtYXNpZGUtc3VtbWFyeS1saXN0Jyk7XG5cbiAgICAgICAgdGhpcy5taW5vclVuaXRzUXVvdGllbnQgPSBhZHllbkNoZWNrb3V0T3B0aW9ucy5hbW91bnQvYWR5ZW5DaGVja291dE9wdGlvbnMudG90YWxQcmljZTtcbiAgICAgICAgdGhpcy5naWZ0Y2FyZERpc2NvdW50ID0gKGFkeWVuQ2hlY2tvdXRPcHRpb25zLmdpZnRjYXJkRGlzY291bnQgLyB0aGlzLm1pbm9yVW5pdHNRdW90aWVudCkudG9GaXhlZCgyKTtcbiAgICAgICAgdGhpcy5yZW1haW5pbmdBbW91bnQgPSAoYWR5ZW5DaGVja291dE9wdGlvbnMudG90YWxQcmljZSAtIHRoaXMuZ2lmdGNhcmREaXNjb3VudCkudG9GaXhlZCgyKTtcbiAgICAgICAgdGhpcy5yZXNwb25zZUhhbmRsZXIgPSB0aGlzLmhhbmRsZVBheW1lbnRBY3Rpb247XG4gICAgICAgIHRoaXMuYWR5ZW5DaGVja291dCA9IFByb21pc2U7XG4gICAgICAgIHRoaXMuaW5pdGlhbGl6ZUNoZWNrb3V0Q29tcG9uZW50KCkudGhlbihmdW5jdGlvbiAoKSB7XG5cbiAgICAgICAgICAgIC8vIE5vbiBhZHllbiBwYXltZW50IG1ldGhvZCBzZWxlY3RlZFxuICAgICAgICAgICAgLy8gdGhpcyBjYW4gbm90IGhhcHBlbiwgYmVjYXVzZSB0aGlzIGpzIHBsdWdpbiBpcyByZWdpc3RlcmVkIG9ubHkgaWYgYWR5ZW4gbWV0aG9kcyBzZWxlY3RlZFxuICAgICAgICAgICAgLy8gUGx1Z2luTWFuYWdlci5yZWdpc3RlcignQ29uZmlybU9yZGVyUGx1Z2luJywgQ29uZmlybU9yZGVyUGx1Z2luLCAnI2FkeWVuLXBheW1lbnQtY2hlY2tvdXQtbWFzaycpO1xuICAgICAgICAgICAgaWYgKGFkeWVuQ2hlY2tvdXRPcHRpb25zLnNlbGVjdGVkUGF5bWVudE1ldGhvZFBsdWdpbklkICE9PVxuICAgICAgICAgICAgICAgIGFkeWVuQ2hlY2tvdXRPcHRpb25zLmFkeWVuUGx1Z2luSWQpIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGlmICghYWR5ZW5DaGVja291dE9wdGlvbnMgfHwgIWFkeWVuQ2hlY2tvdXRPcHRpb25zLnBheW1lbnRTdGF0dXNVcmwgfHxcbiAgICAgICAgICAgICAgICAhYWR5ZW5DaGVja291dE9wdGlvbnMuY2hlY2tvdXRPcmRlclVybCB8fCAhYWR5ZW5DaGVja291dE9wdGlvbnMucGF5bWVudEhhbmRsZVVybCkge1xuICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ0FkeWVuIHBheW1lbnQgY29uZmlndXJhdGlvbiBtaXNzaW5nLicpO1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYgKHRoaXMuc2VsZWN0ZWRBZHllblBheW1lbnRNZXRob2QgaW4gYWR5ZW5Db25maWd1cmF0aW9uLmNvbXBvbmVudHNXaXRoUGF5QnV0dG9uKSB7XG4gICAgICAgICAgICAgICAgLy8gcmVwbGFjZXMgY29uZmlybSBidXR0b24gd2l0aCBhZHllbiBwYXkgYnV0dG9uIGZvciBwYXl3aXRoZ29vZ2xlLCBhcHBsZXBheSBldGMuXG4gICAgICAgICAgICAgICAgdGhpcy5pbml0aWFsaXplQ3VzdG9tUGF5QnV0dG9uKCk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGlmIChhZHllbkNvbmZpZ3VyYXRpb24udXBkYXRhYmxlUGF5bWVudE1ldGhvZHMuaW5jbHVkZXModGhpcy5zZWxlY3RlZEFkeWVuUGF5bWVudE1ldGhvZCkgJiYgIXRoaXMuc3RhdGVEYXRhKSB7XG4gICAgICAgICAgICAgICAgLy8gY3JlYXRlIGlubGluZSBjb21wb25lbnQgZm9yIGNhcmRzIGV0Yy4gYW5kIHNldCBldmVudCBsaXN0ZW5lciBmb3Igc3VibWl0IGJ1dHRvbiB0byBjb25maXJtIHBheW1lbnQgY29tcG9uZW50XG4gICAgICAgICAgICAgICAgdGhpcy5yZW5kZXJQYXltZW50Q29tcG9uZW50KHRoaXMuc2VsZWN0ZWRBZHllblBheW1lbnRNZXRob2QpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICB0aGlzLmNvbmZpcm1Gb3JtU3VibWl0LmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgdGhpcy5vbkNvbmZpcm1PcmRlclN1Ym1pdC5iaW5kKHRoaXMpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfS5iaW5kKHRoaXMpKTtcblxuICAgICAgICBpZiAocGFyc2VJbnQoYWR5ZW5DaGVja291dE9wdGlvbnMucGF5SW5GdWxsV2l0aEdpZnRjYXJkLCAxMCkpIHtcbiAgICAgICAgICAgIGlmIChwYXJzZUludChhZHllbkNoZWNrb3V0T3B0aW9ucy5hZHllbkdpZnRjYXJkU2VsZWN0ZWQsIDEwKSkge1xuICAgICAgICAgICAgICAgIHRoaXMuYXBwZW5kR2lmdGNhcmRTdW1tYXJ5KCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB0aGlzLmFwcGVuZEdpZnRjYXJkU3VtbWFyeSgpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgYXN5bmMgaW5pdGlhbGl6ZUNoZWNrb3V0Q29tcG9uZW50ICgpIHtcbiAgICAgICAgY29uc3QgeyBsb2NhbGUsIGNsaWVudEtleSwgZW52aXJvbm1lbnQsIG1lcmNoYW50QWNjb3VudCB9ID0gYWR5ZW5DaGVja291dENvbmZpZ3VyYXRpb247XG4gICAgICAgIGNvbnN0IHBheW1lbnRNZXRob2RzUmVzcG9uc2UgPSBhZHllbkNoZWNrb3V0T3B0aW9ucy5wYXltZW50TWV0aG9kc1Jlc3BvbnNlO1xuICAgICAgICBjb25zdCBBRFlFTl9DSEVDS09VVF9DT05GSUcgPSB7XG4gICAgICAgICAgICBsb2NhbGUsXG4gICAgICAgICAgICBjbGllbnRLZXksXG4gICAgICAgICAgICBlbnZpcm9ubWVudCxcbiAgICAgICAgICAgIHNob3dQYXlCdXR0b246IHRoaXMuc2VsZWN0ZWRBZHllblBheW1lbnRNZXRob2QgaW4gYWR5ZW5Db25maWd1cmF0aW9uLmNvbXBvbmVudHNXaXRoUGF5QnV0dG9uLFxuICAgICAgICAgICAgaGFzSG9sZGVyTmFtZTogdHJ1ZSxcbiAgICAgICAgICAgIHBheW1lbnRNZXRob2RzUmVzcG9uc2U6IEpTT04ucGFyc2UocGF5bWVudE1ldGhvZHNSZXNwb25zZSksXG4gICAgICAgICAgICBvbkFkZGl0aW9uYWxEZXRhaWxzOiB0aGlzLmhhbmRsZU9uQWRkaXRpb25hbERldGFpbHMuYmluZCh0aGlzKSxcbiAgICAgICAgICAgIGNvdW50cnlDb2RlOiBhY3RpdmVTaGlwcGluZ0FkZHJlc3MuY291bnRyeSxcbiAgICAgICAgICAgIHBheW1lbnRNZXRob2RzQ29uZmlndXJhdGlvbjoge1xuICAgICAgICAgICAgICAgIGNhcmQ6IHtcbiAgICAgICAgICAgICAgICAgICAgaGFzSG9sZGVyTmFtZTogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgY2xpY2tUb1BheUNvbmZpZ3VyYXRpb246IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIG1lcmNoYW50RGlzcGxheU5hbWU6IG1lcmNoYW50QWNjb3VudCxcbiAgICAgICAgICAgICAgICAgICAgICAgIHNob3BwZXJFbWFpbDogc2hvcHBlckRldGFpbHMuc2hvcHBlckVtYWlsXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9LFxuICAgICAgICB9O1xuXG4gICAgICAgIHRoaXMuYWR5ZW5DaGVja291dCA9IGF3YWl0IEFkeWVuQ2hlY2tvdXQoQURZRU5fQ0hFQ0tPVVRfQ09ORklHKTtcbiAgICB9XG5cbiAgICBoYW5kbGVPbkFkZGl0aW9uYWxEZXRhaWxzIChzdGF0ZSkge1xuICAgICAgICB0aGlzLl9jbGllbnQucG9zdChcbiAgICAgICAgICAgIGAke2FkeWVuQ2hlY2tvdXRPcHRpb25zLnBheW1lbnREZXRhaWxzVXJsfWAsXG4gICAgICAgICAgICBKU09OLnN0cmluZ2lmeSh7b3JkZXJJZDogdGhpcy5vcmRlcklkLCBzdGF0ZURhdGE6IEpTT04uc3RyaW5naWZ5KHN0YXRlLmRhdGEpfSksXG4gICAgICAgICAgICBmdW5jdGlvbiAocGF5bWVudFJlc3BvbnNlKSB7XG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuX2NsaWVudC5fcmVxdWVzdC5zdGF0dXMgIT09IDIwMCkge1xuICAgICAgICAgICAgICAgICAgICBsb2NhdGlvbi5ocmVmID0gdGhpcy5lcnJvclVybC50b1N0cmluZygpO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgdGhpcy5yZXNwb25zZUhhbmRsZXIocGF5bWVudFJlc3BvbnNlKTtcbiAgICAgICAgICAgIH0uYmluZCh0aGlzKVxuICAgICAgICApO1xuICAgIH1cblxuICAgIG9uQ29uZmlybU9yZGVyU3VibWl0KGV2ZW50KSB7XG4gICAgICAgIGNvbnN0IGZvcm0gPSAgRG9tQWNjZXNzLnF1ZXJ5U2VsZWN0b3IoZG9jdW1lbnQsICcjY29uZmlybU9yZGVyRm9ybScpO1xuICAgICAgICBpZiAoIWZvcm0uY2hlY2tWYWxpZGl0eSgpKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgRWxlbWVudExvYWRpbmdJbmRpY2F0b3JVdGlsLmNyZWF0ZShkb2N1bWVudC5ib2R5KTtcbiAgICAgICAgY29uc3QgZm9ybURhdGEgPSBGb3JtU2VyaWFsaXplVXRpbC5zZXJpYWxpemUoZm9ybSk7XG4gICAgICAgIHRoaXMuY29uZmlybU9yZGVyKGZvcm1EYXRhKTtcbiAgICB9XG5cbiAgICByZW5kZXJQYXltZW50Q29tcG9uZW50KHR5cGUpIHtcbiAgICAgICAgaWYgKHR5cGUgPT09ICdvbmVjbGljaycpIHtcbiAgICAgICAgICAgIHRoaXMucmVuZGVyU3RvcmVkUGF5bWVudE1ldGhvZENvbXBvbmVudHMoKTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIEdldCB0aGUgcGF5bWVudCBtZXRob2Qgb2JqZWN0IGZyb20gcGF5bWVudE1ldGhvZHNSZXNwb25zZVxuICAgICAgICBsZXQgcGF5bWVudE1ldGhvZENvbmZpZ3MgPSB0aGlzLmFkeWVuQ2hlY2tvdXQucGF5bWVudE1ldGhvZHNSZXNwb25zZS5wYXltZW50TWV0aG9kcy5maWx0ZXIoZnVuY3Rpb24ocGF5bWVudE1ldGhvZCkge1xuICAgICAgICAgICAgcmV0dXJuIHBheW1lbnRNZXRob2RbJ3R5cGUnXSA9PT0gdHlwZTtcbiAgICAgICAgfSk7XG4gICAgICAgIGlmIChwYXltZW50TWV0aG9kQ29uZmlncy5sZW5ndGggPT09IDApIHtcbiAgICAgICAgICAgIGlmICh0aGlzLmFkeWVuQ2hlY2tvdXQub3B0aW9ucy5lbnZpcm9ubWVudCA9PT0gJ3Rlc3QnKSB7XG4gICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcignUGF5bWVudCBtZXRob2QgY29uZmlndXJhdGlvbiBub3QgZm91bmQuICcsIHR5cGUpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGxldCBwYXltZW50TWV0aG9kID0gcGF5bWVudE1ldGhvZENvbmZpZ3NbMF07XG5cbiAgICAgICAgLy8gTW91bnQgcGF5bWVudCBtZXRob2QgaW5zdGFuY2VcbiAgICAgICAgdGhpcy5tb3VudFBheW1lbnRDb21wb25lbnQocGF5bWVudE1ldGhvZCwgZmFsc2UpO1xuICAgIH1cblxuICAgIHJlbmRlclN0b3JlZFBheW1lbnRNZXRob2RDb21wb25lbnRzKCkge1xuICAgICAgICAvLyBJdGVyYXRlIHRocm91Z2ggYW5kIHJlbmRlciB0aGUgc3RvcmVkIHBheW1lbnQgbWV0aG9kc1xuICAgICAgICBjb25zdCBzdG9yZWRQYXltZW50TWV0aG9kcyA9IHRoaXMuYWR5ZW5DaGVja291dC5wYXltZW50TWV0aG9kc1Jlc3BvbnNlLnN0b3JlZFBheW1lbnRNZXRob2RzO1xuICAgICAgICAvLyBNb3VudCBwYXltZW50IG1ldGhvZCBpbnN0YW5jZVxuICAgICAgICBzdG9yZWRQYXltZW50TWV0aG9kcy5mb3JFYWNoKChwYXltZW50TWV0aG9kKSA9PiB7XG4gICAgICAgICAgICBsZXQgc2VsZWN0b3IgPSBgW2RhdGEtYWR5ZW4tc3RvcmVkLXBheW1lbnQtbWV0aG9kLWlkPVwiJHtwYXltZW50TWV0aG9kLmlkfVwiXWA7XG4gICAgICAgICAgICB0aGlzLm1vdW50UGF5bWVudENvbXBvbmVudChwYXltZW50TWV0aG9kLCB0cnVlLCBzZWxlY3Rvcik7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIHRoaXMuaGlkZVN0b3JlUGF5bWVudE1ldGhvZENvbXBvbmVudHMoKTtcbiAgICAgICAgbGV0IHNlbGVjdGVkSWQgPSBudWxsO1xuICAgICAgICBsZXQgc3RvcmVkUGF5bWVudE1ldGhvZEZpZWxkcyA9IERvbUFjY2Vzcy5xdWVyeVNlbGVjdG9yQWxsKGRvY3VtZW50LCAnW25hbWU9YWR5ZW5TdG9yZWRQYXltZW50TWV0aG9kSWRdJyk7XG4gICAgICAgIHN0b3JlZFBheW1lbnRNZXRob2RGaWVsZHMuZm9yRWFjaChmaWVsZCA9PiB7XG4gICAgICAgICAgICBpZiAoIXNlbGVjdGVkSWQpIHtcbiAgICAgICAgICAgICAgICBzZWxlY3RlZElkID0gZmllbGQudmFsdWU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBmaWVsZC5hZGRFdmVudExpc3RlbmVyKCdjaGFuZ2UnLCB0aGlzLnNob3dTZWxlY3RlZFN0b3JlZFBheW1lbnRNZXRob2QuYmluZCh0aGlzKSk7XG4gICAgICAgIH0pO1xuICAgICAgICB0aGlzLnNob3dTZWxlY3RlZFN0b3JlZFBheW1lbnRNZXRob2QobnVsbCwgc2VsZWN0ZWRJZCk7XG4gICAgfVxuXG4gICAgc2hvd1NlbGVjdGVkU3RvcmVkUGF5bWVudE1ldGhvZChldmVudCwgc2VsZWN0ZWRJZD1udWxsKSB7XG4gICAgICAgIC8vIE9ubHkgc2hvdyB0aGUgY29tcG9uZW50IGZvciB0aGUgc2VsZWN0ZWQgc3RvcmVkIHBheW1lbnQgbWV0aG9kXG4gICAgICAgIHRoaXMuaGlkZVN0b3JlUGF5bWVudE1ldGhvZENvbXBvbmVudHMoKTtcbiAgICAgICAgc2VsZWN0ZWRJZCA9IGV2ZW50ID8gZXZlbnQudGFyZ2V0LnZhbHVlIDogc2VsZWN0ZWRJZDtcbiAgICAgICAgbGV0IHNlbGVjdG9yID0gYFtkYXRhLWFkeWVuLXN0b3JlZC1wYXltZW50LW1ldGhvZC1pZD1cIiR7c2VsZWN0ZWRJZH1cIl1gO1xuICAgICAgICBsZXQgY29tcG9uZW50ID0gRG9tQWNjZXNzLnF1ZXJ5U2VsZWN0b3IoZG9jdW1lbnQsIHNlbGVjdG9yKTtcbiAgICAgICAgY29tcG9uZW50LnN0eWxlLmRpc3BsYXkgPSAnYmxvY2snO1xuICAgIH1cblxuICAgIGhpZGVTdG9yZVBheW1lbnRNZXRob2RDb21wb25lbnRzKCkge1xuICAgICAgICBsZXQgc3RvcmVkUGF5bWVudENvbXBvbmVudHMgPSBEb21BY2Nlc3MucXVlcnlTZWxlY3RvckFsbChkb2N1bWVudCwgJy5zdG9yZWQtcGF5bWVudC1jb21wb25lbnQnKTtcbiAgICAgICAgc3RvcmVkUGF5bWVudENvbXBvbmVudHMuZm9yRWFjaChjb21wb25lbnQgPT4ge1xuICAgICAgICAgICAgY29tcG9uZW50LnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7XG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIGNvbmZpcm1PcmRlcihmb3JtRGF0YSwgZXh0cmFQYXJhbXM9IHt9KSB7XG4gICAgICAgIGNvbnN0IG9yZGVySWQgPSBhZHllbkNoZWNrb3V0T3B0aW9ucy5vcmRlcklkO1xuICAgICAgICBmb3JtRGF0YS5zZXQoJ2FmZmlsaWF0ZUNvZGUnLCBhZHllbkNoZWNrb3V0T3B0aW9ucy5hZmZpbGlhdGVDb2RlKTtcbiAgICAgICAgZm9ybURhdGEuc2V0KCdjYW1wYWlnbkNvZGUnLCBhZHllbkNoZWNrb3V0T3B0aW9ucy5jYW1wYWlnbkNvZGUpO1xuXG4gICAgICAgIGlmICghIW9yZGVySWQpIHsgLy9Pbmx5IHVzZWQgaWYgdGhlIG9yZGVyIGlzIGJlaW5nIGVkaXRlZFxuICAgICAgICAgICAgdGhpcy51cGRhdGVQYXltZW50KGZvcm1EYXRhLCBvcmRlcklkLCBleHRyYVBhcmFtcylcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMuY3JlYXRlT3JkZXIoZm9ybURhdGEsIGV4dHJhUGFyYW1zKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHVwZGF0ZVBheW1lbnQoZm9ybURhdGEsIG9yZGVySWQsIGV4dHJhUGFyYW1zKSB7XG4gICAgICAgIGZvcm1EYXRhLnNldCgnb3JkZXJJZCcsIG9yZGVySWQpO1xuXG4gICAgICAgIHRoaXMuX2NsaWVudC5wb3N0KFxuICAgICAgICAgICAgYWR5ZW5DaGVja291dE9wdGlvbnMudXBkYXRlUGF5bWVudFVybCxcbiAgICAgICAgICAgIGZvcm1EYXRhLFxuICAgICAgICAgICAgdGhpcy5hZnRlclNldFBheW1lbnQuYmluZCh0aGlzLCBleHRyYVBhcmFtcylcbiAgICAgICAgKTtcbiAgICB9XG5cbiAgICBjcmVhdGVPcmRlcihmb3JtRGF0YSwgZXh0cmFQYXJhbXMpIHtcbiAgICAgICAgaWYgKFxuICAgICAgICAgICAgcGFyc2VJbnQoYWR5ZW5DaGVja291dE9wdGlvbnMuZ2lmdGNhcmREaXNjb3VudCwgMTApICYmXG4gICAgICAgICAgICAhcGFyc2VJbnQoYWR5ZW5DaGVja291dE9wdGlvbnMucGF5SW5GdWxsV2l0aEdpZnRjYXJkLCAxMClcbiAgICAgICAgKSB7XG4gICAgICAgICAgICAvLyBjcmVhdGUgQWR5ZW4gb3JkZXIgZm9yIHBhcnRpYWwgcGF5bWVudHNcbiAgICAgICAgICAgIHRoaXMuX2NsaWVudC5wb3N0KFxuICAgICAgICAgICAgICAgIGFkeWVuQ2hlY2tvdXRPcHRpb25zLmNyZWF0ZU9yZGVyVXJsLFxuICAgICAgICAgICAgICAgIEpTT04uc3RyaW5naWZ5KHtvcmRlckFtb3VudDogYWR5ZW5DaGVja291dE9wdGlvbnMuYW1vdW50LCBjdXJyZW5jeTogYWR5ZW5DaGVja291dE9wdGlvbnMuY3VycmVuY3l9KSxcbiAgICAgICAgICAgICAgICBmdW5jdGlvbiAocmVzcG9uc2UpIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgYWR5ZW5PcmRlciA9IEpTT04ucGFyc2UocmVzcG9uc2UpO1xuICAgICAgICAgICAgICAgICAgICBpZiAoYWR5ZW5PcmRlci5yZXN1bHRDb2RlID09PSAnU3VjY2VzcycpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGV4dHJhUGFyYW1zID0gT2JqZWN0LmFzc2lnbihleHRyYVBhcmFtcywge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9yZGVyOiBhZHllbk9yZGVyXG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgIC8vIGNyZWF0ZSBzaG9wd2FyZSBvcmRlclxuICAgICAgICAgICAgICAgICAgICB0aGlzLl9jbGllbnQucG9zdChcbiAgICAgICAgICAgICAgICAgICAgICAgIGFkeWVuQ2hlY2tvdXRPcHRpb25zLmNoZWNrb3V0T3JkZXJVcmwsXG4gICAgICAgICAgICAgICAgICAgICAgICBmb3JtRGF0YSxcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuYWZ0ZXJDcmVhdGVPcmRlci5iaW5kKHRoaXMsIGV4dHJhUGFyYW1zKVxuICAgICAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgIH0uYmluZCh0aGlzKVxuICAgICAgICAgICAgKVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5fY2xpZW50LnBvc3QoXG4gICAgICAgICAgICAgICAgYWR5ZW5DaGVja291dE9wdGlvbnMuY2hlY2tvdXRPcmRlclVybCxcbiAgICAgICAgICAgICAgICBmb3JtRGF0YSxcbiAgICAgICAgICAgICAgICB0aGlzLmFmdGVyQ3JlYXRlT3JkZXIuYmluZCh0aGlzLCBleHRyYVBhcmFtcylcbiAgICAgICAgICAgICk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBhZnRlckNyZWF0ZU9yZGVyKGV4dHJhUGFyYW1zPXt9LCByZXNwb25zZSkge1xuICAgICAgICBsZXQgb3JkZXI7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBvcmRlciA9IEpTT04ucGFyc2UocmVzcG9uc2UpO1xuICAgICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgRWxlbWVudExvYWRpbmdJbmRpY2F0b3JVdGlsLnJlbW92ZShkb2N1bWVudC5ib2R5KTtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKCdFcnJvcjogaW52YWxpZCByZXNwb25zZSBmcm9tIFNob3B3YXJlIEFQSScsIHJlc3BvbnNlKTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIHRoaXMub3JkZXJJZCA9IG9yZGVyLmlkO1xuICAgICAgICB0aGlzLmZpbmlzaFVybCA9IG5ldyBVUkwoXG4gICAgICAgICAgICBsb2NhdGlvbi5vcmlnaW4gKyBhZHllbkNoZWNrb3V0T3B0aW9ucy5wYXltZW50RmluaXNoVXJsKTtcbiAgICAgICAgdGhpcy5maW5pc2hVcmwuc2VhcmNoUGFyYW1zLnNldCgnb3JkZXJJZCcsIG9yZGVyLmlkKTtcbiAgICAgICAgdGhpcy5lcnJvclVybCA9IG5ldyBVUkwoXG4gICAgICAgICAgICBsb2NhdGlvbi5vcmlnaW4gKyBhZHllbkNoZWNrb3V0T3B0aW9ucy5wYXltZW50RXJyb3JVcmwpO1xuICAgICAgICB0aGlzLmVycm9yVXJsLnNlYXJjaFBhcmFtcy5zZXQoJ29yZGVySWQnLCBvcmRlci5pZCk7XG4gICAgICAgIGxldCBwYXJhbXMgPSB7XG4gICAgICAgICAgICAnb3JkZXJJZCc6IHRoaXMub3JkZXJJZCxcbiAgICAgICAgICAgICdmaW5pc2hVcmwnOiB0aGlzLmZpbmlzaFVybC50b1N0cmluZygpLFxuICAgICAgICAgICAgJ2Vycm9yVXJsJzogdGhpcy5lcnJvclVybC50b1N0cmluZygpLFxuICAgICAgICB9O1xuICAgICAgICAvLyBBcHBlbmQgYW55IGV4dHJhIHBhcmFtZXRlcnMgcGFzc2VkLCBlLmcuIHN0YXRlRGF0YVxuICAgICAgICBmb3IgKGNvbnN0IHByb3BlcnR5IGluIGV4dHJhUGFyYW1zKSB7XG4gICAgICAgICAgICBwYXJhbXNbcHJvcGVydHldID0gZXh0cmFQYXJhbXNbcHJvcGVydHldO1xuICAgICAgICB9XG5cbiAgICAgICAgdGhpcy5fY2xpZW50LnBvc3QoXG4gICAgICAgICAgICBhZHllbkNoZWNrb3V0T3B0aW9ucy5wYXltZW50SGFuZGxlVXJsLFxuICAgICAgICAgICAgSlNPTi5zdHJpbmdpZnkocGFyYW1zKSxcbiAgICAgICAgICAgIHRoaXMuYWZ0ZXJQYXlPcmRlci5iaW5kKHRoaXMsIHRoaXMub3JkZXJJZCksXG4gICAgICAgICk7XG4gICAgfVxuXG4gICAgYWZ0ZXJTZXRQYXltZW50KGV4dHJhUGFyYW1zPXt9LCByZXNwb25zZSkge1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgY29uc3QgcmVzcG9uc2VPYmplY3QgPSBKU09OLnBhcnNlKHJlc3BvbnNlKTtcbiAgICAgICAgICAgIGlmIChyZXNwb25zZU9iamVjdC5zdWNjZXNzKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5hZnRlckNyZWF0ZU9yZGVyKGV4dHJhUGFyYW1zLFxuICAgICAgICAgICAgICAgICAgICBKU09OLnN0cmluZ2lmeSh7aWQ6IGFkeWVuQ2hlY2tvdXRPcHRpb25zLm9yZGVySWR9KSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgIEVsZW1lbnRMb2FkaW5nSW5kaWNhdG9yVXRpbC5yZW1vdmUoZG9jdW1lbnQuYm9keSk7XG4gICAgICAgICAgICBjb25zb2xlLmxvZygnRXJyb3I6IGludmFsaWQgcmVzcG9uc2UgZnJvbSBTaG9wd2FyZSBBUEknLCByZXNwb25zZSk7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBhZnRlclBheU9yZGVyKG9yZGVySWQsIHJlc3BvbnNlKSB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICByZXNwb25zZSA9IEpTT04ucGFyc2UocmVzcG9uc2UpO1xuICAgICAgICAgICAgdGhpcy5yZXR1cm5VcmwgPSByZXNwb25zZS5yZWRpcmVjdFVybDtcbiAgICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICAgICAgRWxlbWVudExvYWRpbmdJbmRpY2F0b3JVdGlsLnJlbW92ZShkb2N1bWVudC5ib2R5KTtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKCdFcnJvcjogaW52YWxpZCByZXNwb25zZSBmcm9tIFNob3B3YXJlIEFQSScsIHJlc3BvbnNlKTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIElmIHBheW1lbnQgY2FsbCByZXR1cm5zIHRoZSBlcnJvclVybCwgdGhlbiBubyBuZWVkIHRvIHByb2NlZWQgZnVydGhlci5cbiAgICAgICAgLy8gUmVkaXJlY3QgdG8gZXJyb3IgcGFnZS5cbiAgICAgICAgaWYgKHRoaXMucmV0dXJuVXJsID09PSB0aGlzLmVycm9yVXJsLnRvU3RyaW5nKCkpIHtcbiAgICAgICAgICAgIGxvY2F0aW9uLmhyZWYgPSB0aGlzLnJldHVyblVybDtcbiAgICAgICAgfVxuXG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICB0aGlzLl9jbGllbnQucG9zdChcbiAgICAgICAgICAgICAgICBgJHthZHllbkNoZWNrb3V0T3B0aW9ucy5wYXltZW50U3RhdHVzVXJsfWAsXG4gICAgICAgICAgICAgICAgSlNPTi5zdHJpbmdpZnkoeydvcmRlcklkJzogb3JkZXJJZH0pLFxuICAgICAgICAgICAgICAgIHRoaXMucmVzcG9uc2VIYW5kbGVyLmJpbmQodGhpcyksXG4gICAgICAgICAgICApO1xuICAgICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgICAgICBjb25zb2xlLmxvZyhlKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIGhhbmRsZVBheW1lbnRBY3Rpb24ocmVzcG9uc2UpIHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGNvbnN0IHBheW1lbnRSZXNwb25zZSA9IEpTT04ucGFyc2UocmVzcG9uc2UpO1xuICAgICAgICAgICAgaWYgKHBheW1lbnRSZXNwb25zZS5pc0ZpbmFsIHx8IHBheW1lbnRSZXNwb25zZS5hY3Rpb24udHlwZSA9PT0gJ3ZvdWNoZXInKSB7XG4gICAgICAgICAgICAgICAgbG9jYXRpb24uaHJlZiA9IHRoaXMucmV0dXJuVXJsO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKCEhcGF5bWVudFJlc3BvbnNlLmFjdGlvbikge1xuICAgICAgICAgICAgICAgIGNvbnN0IGFjdGlvbk1vZGFsQ29uZmlndXJhdGlvbiA9IHt9O1xuICAgICAgICAgICAgICAgIGlmIChwYXltZW50UmVzcG9uc2UuYWN0aW9uLnR5cGUgPT09ICd0aHJlZURTMicpIHtcbiAgICAgICAgICAgICAgICAgICAgYWN0aW9uTW9kYWxDb25maWd1cmF0aW9uLmNoYWxsZW5nZVdpbmRvd1NpemUgPSAnMDUnO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIHRoaXMuYWR5ZW5DaGVja291dFxuICAgICAgICAgICAgICAgICAgICAuY3JlYXRlRnJvbUFjdGlvbihwYXltZW50UmVzcG9uc2UuYWN0aW9uLCBhY3Rpb25Nb2RhbENvbmZpZ3VyYXRpb24pXG4gICAgICAgICAgICAgICAgICAgIC5tb3VudCgnW2RhdGEtYWR5ZW4tcGF5bWVudC1hY3Rpb24tY29udGFpbmVyXScpO1xuICAgICAgICAgICAgICAgIGNvbnN0IG1vZGFsQWN0aW9uVHlwZXMgPSBbJ3RocmVlRFMyJywgJ3FyQ29kZSddXG4gICAgICAgICAgICAgICAgaWYgKG1vZGFsQWN0aW9uVHlwZXMuaW5jbHVkZXMocGF5bWVudFJlc3BvbnNlLmFjdGlvbi50eXBlKSkge1xuICAgICAgICAgICAgICAgICAgICBpZiAod2luZG93LmpRdWVyeSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gQm9vdHN0cmFwIHY0IHN1cHBvcnRcbiAgICAgICAgICAgICAgICAgICAgICAgICQoJ1tkYXRhLWFkeWVuLXBheW1lbnQtYWN0aW9uLW1vZGFsXScpLm1vZGFsKHtzaG93OiB0cnVlfSk7XG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBCb290c3RyYXAgdjUgc3VwcG9ydFxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGFkeWVuUGF5bWVudE1vZGFsID0gbmV3IGJvb3RzdHJhcC5Nb2RhbChkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnYWR5ZW4tcGF5bWVudC1hY3Rpb24tbW9kYWwnKSwge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGtleWJvYXJkOiBmYWxzZVxuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBhZHllblBheW1lbnRNb2RhbC5zaG93KCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKGUpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgaW5pdGlhbGl6ZUN1c3RvbVBheUJ1dHRvbigpIHtcblxuICAgICAgICBjb25zdCBjb21wb25lbnRDb25maWcgPSBhZHllbkNvbmZpZ3VyYXRpb24uY29tcG9uZW50c1dpdGhQYXlCdXR0b25bdGhpcy5zZWxlY3RlZEFkeWVuUGF5bWVudE1ldGhvZF07XG5cbiAgICAgICAgdGhpcy5jb21wbGV0ZVBlbmRpbmdQYXltZW50KHRoaXMuc2VsZWN0ZWRBZHllblBheW1lbnRNZXRob2QsIGNvbXBvbmVudENvbmZpZyk7XG5cbiAgICAgICAgLy8gZ2V0IHNlbGVjdGVkIHBheW1lbnQgbWV0aG9kIG9iamVjdFxuICAgICAgICBsZXQgc2VsZWN0ZWRQYXltZW50TWV0aG9kID0gdGhpcy5hZHllbkNoZWNrb3V0LnBheW1lbnRNZXRob2RzUmVzcG9uc2UucGF5bWVudE1ldGhvZHNcbiAgICAgICAgICAgIC5maWx0ZXIoaXRlbSA9PiBpdGVtLnR5cGUgPT09IHRoaXMuc2VsZWN0ZWRBZHllblBheW1lbnRNZXRob2QpO1xuXG4gICAgICAgIC8qXG4gICAgICAgICAqIElmIHRoZSBQTSBpcyBHb29nbGVQYXkgaW4gU2hvcHdhcmUsIGNoZWNrIGZvciB0aGUgYHBheXdpdGhnb29nbGVgIHR4X3ZhcmlhbnQgYWxzbyBpbiBwYXltZW50TWV0aG9kcyByZXNwb25zZS5cbiAgICAgICAgICogVGhpcyBibG9jayBzaG91bGQgYmUgcmVtb3ZlIGFmdGVyIGRlcHJlYXRpbmcgdGhlIGBwYXl3aXRoZ29vZ2xlYCB0eF92YXJpYW50LlxuICAgICAgICAgKi9cbiAgICAgICAgLy8gVE9ETzogRm9sbG93aW5nIGJsb2NrIHdpbGwgYmUgcmVtb3ZlZCBhZnRlciB0aGUgZGVwcmVjYXRpb24gb2YgdGhlIGBwYXl3aXRoZ29vZ2xlYCB0eF92YXJpYW50LlxuICAgICAgICBpZiAoc2VsZWN0ZWRQYXltZW50TWV0aG9kLmxlbmd0aCA8IDEgJiYgdGhpcy5zZWxlY3RlZEFkeWVuUGF5bWVudE1ldGhvZCA9PT0gJ2dvb2dsZXBheScpIHtcbiAgICAgICAgICAgIHNlbGVjdGVkUGF5bWVudE1ldGhvZCA9IHRoaXMuYWR5ZW5DaGVja291dC5wYXltZW50TWV0aG9kc1Jlc3BvbnNlLnBheW1lbnRNZXRob2RzXG4gICAgICAgICAgICAgICAgLmZpbHRlcihpdGVtID0+IGl0ZW0udHlwZSA9PT0gJ3BheXdpdGhnb29nbGUnKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChzZWxlY3RlZFBheW1lbnRNZXRob2QubGVuZ3RoIDwgMSkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGxldCBzZWxlY3RlZFBheW1lbnRNZXRob2RPYmplY3QgPSBzZWxlY3RlZFBheW1lbnRNZXRob2RbMF07XG5cbiAgICAgICAgaWYgKCFhZHllbkNoZWNrb3V0T3B0aW9ucy5hbW91bnQpIHtcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ0ZhaWxlZCB0byBmZXRjaCBDYXJ0L09yZGVyIHRvdGFsIGFtb3VudC4nKTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICghIWNvbXBvbmVudENvbmZpZy5wcmVQYXlSZWRpcmVjdCkge1xuICAgICAgICAgICAgdGhpcy5yZW5kZXJQcmVQYXltZW50QnV0dG9uKGNvbXBvbmVudENvbmZpZywgc2VsZWN0ZWRQYXltZW50TWV0aG9kT2JqZWN0KTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IFBBWV9CVVRUT05fQ09ORklHID0gT2JqZWN0LmFzc2lnbihjb21wb25lbnRDb25maWcuZXh0cmEsIHNlbGVjdGVkUGF5bWVudE1ldGhvZE9iamVjdCwge1xuICAgICAgICAgICAgYW1vdW50OiB7XG4gICAgICAgICAgICAgICAgdmFsdWU6IGFkeWVuQ2hlY2tvdXRPcHRpb25zLmFtb3VudCxcbiAgICAgICAgICAgICAgICBjdXJyZW5jeTogYWR5ZW5DaGVja291dE9wdGlvbnMuY3VycmVuY3ksXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgZGF0YToge1xuICAgICAgICAgICAgICAgIHBlcnNvbmFsRGV0YWlsczogc2hvcHBlckRldGFpbHMsXG4gICAgICAgICAgICAgICAgYmlsbGluZ0FkZHJlc3M6IGFjdGl2ZUJpbGxpbmdBZGRyZXNzLFxuICAgICAgICAgICAgICAgIGRlbGl2ZXJ5QWRkcmVzczogYWN0aXZlU2hpcHBpbmdBZGRyZXNzXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgb25DbGljazogKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuICAgICAgICAgICAgICAgIGlmICghY29tcG9uZW50Q29uZmlnLm9uQ2xpY2socmVzb2x2ZSwgcmVqZWN0LCB0aGlzKSkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIEVsZW1lbnRMb2FkaW5nSW5kaWNhdG9yVXRpbC5jcmVhdGUoZG9jdW1lbnQuYm9keSk7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgb25TdWJtaXQ6IGZ1bmN0aW9uIChzdGF0ZSwgY29tcG9uZW50KSB7XG4gICAgICAgICAgICAgICAgaWYgKHN0YXRlLmlzVmFsaWQpIHtcbiAgICAgICAgICAgICAgICAgICAgbGV0IGV4dHJhUGFyYW1zID0ge1xuICAgICAgICAgICAgICAgICAgICAgICAgc3RhdGVEYXRhOiBKU09OLnN0cmluZ2lmeShzdGF0ZS5kYXRhKVxuICAgICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgICAgICBsZXQgZm9ybURhdGEgPSBGb3JtU2VyaWFsaXplVXRpbC5zZXJpYWxpemUodGhpcy5jb25maXJtT3JkZXJGb3JtKTtcbiAgICAgICAgICAgICAgICAgICAgLy8gU2V0IGEgY3VzdG9tIHJlc3BvbnNlIGFjdGlvbiBoYW5kbGVyIGlmIGF2YWlsYWJsZS5cbiAgICAgICAgICAgICAgICAgICAgaWYgKCdyZXNwb25zZUhhbmRsZXInIGluIGNvbXBvbmVudENvbmZpZykge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5yZXNwb25zZUhhbmRsZXIgPSBjb21wb25lbnRDb25maWcucmVzcG9uc2VIYW5kbGVyLmJpbmQoY29tcG9uZW50LCB0aGlzKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuY29uZmlybU9yZGVyKGZvcm1EYXRhLCBleHRyYVBhcmFtcyk7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgY29tcG9uZW50LnNob3dWYWxpZGF0aW9uKCk7XG4gICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLmFkeWVuQ2hlY2tvdXQub3B0aW9ucy5lbnZpcm9ubWVudCA9PT0gJ3Rlc3QnKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygnUGF5bWVudCBmYWlsZWQ6ICcsIHN0YXRlKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0uYmluZCh0aGlzKSxcbiAgICAgICAgICAgIG9uQ2FuY2VsOiAoZGF0YSwgY29tcG9uZW50KSA9PiB7XG4gICAgICAgICAgICAgICAgRWxlbWVudExvYWRpbmdJbmRpY2F0b3JVdGlsLnJlbW92ZShkb2N1bWVudC5ib2R5KTtcbiAgICAgICAgICAgICAgICBjb21wb25lbnRDb25maWcub25DYW5jZWwoZGF0YSwgY29tcG9uZW50LCB0aGlzKTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBvbkVycm9yOiAoZXJyb3IsIGNvbXBvbmVudCkgPT4ge1xuICAgICAgICAgICAgICAgIGlmIChjb21wb25lbnQucHJvcHMubmFtZSA9PT0gJ1BheVBhbCcgJiYgZXJyb3IubmFtZSA9PT0gJ0NBTkNFTCcpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5fY2xpZW50LnBvc3QoXG4gICAgICAgICAgICAgICAgICAgICAgICBgJHthZHllbkNoZWNrb3V0T3B0aW9ucy5jYW5jZWxPcmRlclRyYW5zYWN0aW9uVXJsfWAsXG4gICAgICAgICAgICAgICAgICAgICAgICBKU09OLnN0cmluZ2lmeSh7b3JkZXJJZDogdGhpcy5vcmRlcklkfSlcbiAgICAgICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICBFbGVtZW50TG9hZGluZ0luZGljYXRvclV0aWwucmVtb3ZlKGRvY3VtZW50LmJvZHkpO1xuICAgICAgICAgICAgICAgIGNvbXBvbmVudENvbmZpZy5vbkVycm9yKGVycm9yLCBjb21wb25lbnQsIHRoaXMpO1xuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGVycm9yKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG5cbiAgICAgICAgY29uc3QgcGF5bWVudE1ldGhvZEluc3RhbmNlID0gdGhpcy5hZHllbkNoZWNrb3V0LmNyZWF0ZShcbiAgICAgICAgICAgIHNlbGVjdGVkUGF5bWVudE1ldGhvZE9iamVjdC50eXBlLFxuICAgICAgICAgICAgUEFZX0JVVFRPTl9DT05GSUdcbiAgICAgICAgKTtcblxuICAgICAgICB0cnkge1xuICAgICAgICAgICAgaWYgKCdpc0F2YWlsYWJsZScgaW4gcGF5bWVudE1ldGhvZEluc3RhbmNlKSB7XG4gICAgICAgICAgICAgICAgcGF5bWVudE1ldGhvZEluc3RhbmNlLmlzQXZhaWxhYmxlKCkudGhlbihmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMubW91bnRDdXN0b21QYXlCdXR0b24ocGF5bWVudE1ldGhvZEluc3RhbmNlKTtcbiAgICAgICAgICAgICAgICB9LmJpbmQodGhpcykpLmNhdGNoKGUgPT4ge1xuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhzZWxlY3RlZFBheW1lbnRNZXRob2RPYmplY3QudHlwZSArICcgaXMgbm90IGF2YWlsYWJsZScsIGUpO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICB0aGlzLm1vdW50Q3VzdG9tUGF5QnV0dG9uKHBheW1lbnRNZXRob2RJbnN0YW5jZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKGUpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgcmVuZGVyUHJlUGF5bWVudEJ1dHRvbihjb21wb25lbnRDb25maWcsIHNlbGVjdGVkUGF5bWVudE1ldGhvZE9iamVjdCkge1xuICAgICAgICBpZiAoc2VsZWN0ZWRQYXltZW50TWV0aG9kT2JqZWN0LnR5cGUgPT09ICdhbWF6b25wYXknKSB7XG4gICAgICAgICAgICBjb21wb25lbnRDb25maWcuZXh0cmEgPSB0aGlzLnNldEFkZHJlc3NEZXRhaWxzKGNvbXBvbmVudENvbmZpZy5leHRyYSk7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgUFJFX1BBWV9CVVRUT04gPSBPYmplY3QuYXNzaWduKGNvbXBvbmVudENvbmZpZy5leHRyYSwgc2VsZWN0ZWRQYXltZW50TWV0aG9kT2JqZWN0LCB7XG4gICAgICAgICAgICBjb25maWd1cmF0aW9uOiBzZWxlY3RlZFBheW1lbnRNZXRob2RPYmplY3QuY29uZmlndXJhdGlvbixcbiAgICAgICAgICAgIGFtb3VudDoge1xuICAgICAgICAgICAgICAgIHZhbHVlOiBhZHllbkNoZWNrb3V0T3B0aW9ucy5hbW91bnQsXG4gICAgICAgICAgICAgICAgY3VycmVuY3k6IGFkeWVuQ2hlY2tvdXRPcHRpb25zLmN1cnJlbmN5LFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIG9uQ2xpY2s6IChyZXNvbHZlLCByZWplY3QpID0+IHtcbiAgICAgICAgICAgICAgICBpZiAoIWNvbXBvbmVudENvbmZpZy5vbkNsaWNrKHJlc29sdmUsIHJlamVjdCwgdGhpcykpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBFbGVtZW50TG9hZGluZ0luZGljYXRvclV0aWwuY3JlYXRlKGRvY3VtZW50LmJvZHkpO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIG9uRXJyb3I6IChlcnJvciwgY29tcG9uZW50KSA9PiB7XG4gICAgICAgICAgICAgICAgRWxlbWVudExvYWRpbmdJbmRpY2F0b3JVdGlsLnJlbW92ZShkb2N1bWVudC5ib2R5KTtcbiAgICAgICAgICAgICAgICBjb21wb25lbnRDb25maWcub25FcnJvcihlcnJvciwgY29tcG9uZW50LCB0aGlzKTtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhlcnJvcik7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgICBsZXQgcGF5bWVudE1ldGhvZEluc3RhbmNlID0gdGhpcy5hZHllbkNoZWNrb3V0LmNyZWF0ZShcbiAgICAgICAgICAgIHNlbGVjdGVkUGF5bWVudE1ldGhvZE9iamVjdC50eXBlLFxuICAgICAgICAgICAgUFJFX1BBWV9CVVRUT05cbiAgICAgICAgKTtcbiAgICAgICAgdGhpcy5tb3VudEN1c3RvbVBheUJ1dHRvbihwYXltZW50TWV0aG9kSW5zdGFuY2UpO1xuICAgIH1cblxuICAgIGNvbXBsZXRlUGVuZGluZ1BheW1lbnQocGF5bWVudE1ldGhvZFR5cGUsIGNvbmZpZykge1xuICAgICAgICBjb25zdCB1cmwgPSBuZXcgVVJMKGxvY2F0aW9uLmhyZWYpO1xuICAgICAgICAvLyBDaGVjayBmb3IgcGVuZGluZyBwYXltZW50IHNlc3Npb25cbiAgICAgICAgaWYgKHVybC5zZWFyY2hQYXJhbXMuaGFzKGNvbmZpZy5zZXNzaW9uS2V5KSkge1xuICAgICAgICAgICAgRWxlbWVudExvYWRpbmdJbmRpY2F0b3JVdGlsLmNyZWF0ZShkb2N1bWVudC5ib2R5KTtcbiAgICAgICAgICAgIGNvbnN0IHBheW1lbnRNZXRob2RJbnN0YW5jZSA9IHRoaXMuYWR5ZW5DaGVja291dC5jcmVhdGUocGF5bWVudE1ldGhvZFR5cGUsIHtcbiAgICAgICAgICAgICAgICBbY29uZmlnLnNlc3Npb25LZXldOiB1cmwuc2VhcmNoUGFyYW1zLmdldChjb25maWcuc2Vzc2lvbktleSksXG4gICAgICAgICAgICAgICAgc2hvd09yZGVyQnV0dG9uOiBmYWxzZSxcbiAgICAgICAgICAgICAgICBvblN1Ym1pdDogZnVuY3Rpb24gKHN0YXRlLCBjb21wb25lbnQpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHN0YXRlLmlzVmFsaWQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGxldCBleHRyYVBhcmFtcyA9IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdGF0ZURhdGE6IEpTT04uc3RyaW5naWZ5KHN0YXRlLmRhdGEpXG4gICAgICAgICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgICAgICAgICAgbGV0IGZvcm1EYXRhID0gRm9ybVNlcmlhbGl6ZVV0aWwuc2VyaWFsaXplKHRoaXMuY29uZmlybU9yZGVyRm9ybSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmNvbmZpcm1PcmRlcihmb3JtRGF0YSwgZXh0cmFQYXJhbXMpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfS5iaW5kKHRoaXMpLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB0aGlzLm1vdW50Q3VzdG9tUGF5QnV0dG9uKHBheW1lbnRNZXRob2RJbnN0YW5jZSk7XG4gICAgICAgICAgICBwYXltZW50TWV0aG9kSW5zdGFuY2Uuc3VibWl0KCk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBnZXRTZWxlY3RlZFBheW1lbnRNZXRob2RLZXkoKSB7XG4gICAgICAgIHJldHVybiBPYmplY3Qua2V5cyhcbiAgICAgICAgICAgIGFkeWVuQ29uZmlndXJhdGlvbi5wYXltZW50TWV0aG9kVHlwZUhhbmRsZXJzKS5maW5kKFxuICAgICAgICAgICAgICAgIGtleSA9PiBhZHllbkNvbmZpZ3VyYXRpb24ucGF5bWVudE1ldGhvZFR5cGVIYW5kbGVyc1trZXldID09PVxuICAgICAgICAgICAgICAgICAgICBhZHllbkNoZWNrb3V0T3B0aW9ucy5zZWxlY3RlZFBheW1lbnRNZXRob2RIYW5kbGVyKTtcbiAgICB9XG5cbiAgICBtb3VudEN1c3RvbVBheUJ1dHRvbihwYXltZW50TWV0aG9kSW5zdGFuY2UpIHtcbiAgICAgICAgbGV0IGZvcm0gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjY29uZmlybU9yZGVyRm9ybScpO1xuICAgICAgICBpZiAoZm9ybSkge1xuICAgICAgICAgICAgbGV0IHN1Ym1pdEJ1dHRvbiA9IGZvcm0ucXVlcnlTZWxlY3RvcignYnV0dG9uW3R5cGU9c3VibWl0XScpO1xuICAgICAgICAgICAgaWYgKHN1Ym1pdEJ1dHRvbiAmJiAhc3VibWl0QnV0dG9uLmRpc2FibGVkKSB7XG4gICAgICAgICAgICAgICAgbGV0IGNvbmZpcm1CdXR0b25Db250YWluZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICAgICAgICAgICAgICBjb25maXJtQnV0dG9uQ29udGFpbmVyLmlkID0gJ2FkeWVuLWNvbmZpcm0tYnV0dG9uJztcbiAgICAgICAgICAgICAgICBjb25maXJtQnV0dG9uQ29udGFpbmVyLnNldEF0dHJpYnV0ZSgnZGF0YS1hZHllbi1jb25maXJtLWJ1dHRvbicsICcnKVxuICAgICAgICAgICAgICAgIGZvcm0uYXBwZW5kQ2hpbGQoY29uZmlybUJ1dHRvbkNvbnRhaW5lcik7XG4gICAgICAgICAgICAgICAgcGF5bWVudE1ldGhvZEluc3RhbmNlLm1vdW50KGNvbmZpcm1CdXR0b25Db250YWluZXIpO1xuICAgICAgICAgICAgICAgIHN1Ym1pdEJ1dHRvbi5yZW1vdmUoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cblxuICAgIG1vdW50UGF5bWVudENvbXBvbmVudChwYXltZW50TWV0aG9kLCBpc09uZUNsaWNrID0gZmFsc2UsIHNlbGVjdG9yID0gbnVsbCkge1xuICAgICAgICBjb25zdCBjb25maWd1cmF0aW9uID0gT2JqZWN0LmFzc2lnbih7fSwgcGF5bWVudE1ldGhvZCwge1xuICAgICAgICAgICAgZGF0YToge1xuICAgICAgICAgICAgICAgIHBlcnNvbmFsRGV0YWlsczogc2hvcHBlckRldGFpbHMsXG4gICAgICAgICAgICAgICAgYmlsbGluZ0FkZHJlc3M6IGFjdGl2ZUJpbGxpbmdBZGRyZXNzLFxuICAgICAgICAgICAgICAgIGRlbGl2ZXJ5QWRkcmVzczogYWN0aXZlU2hpcHBpbmdBZGRyZXNzXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgb25TdWJtaXQ6IGZ1bmN0aW9uKHN0YXRlLCBjb21wb25lbnQpIHtcbiAgICAgICAgICAgICAgICBpZiAoc3RhdGUuaXNWYWxpZCkge1xuICAgICAgICAgICAgICAgICAgICBsZXQgZXh0cmFQYXJhbXMgPSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBzdGF0ZURhdGE6IEpTT04uc3RyaW5naWZ5KHN0YXRlLmRhdGEpXG4gICAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgICAgIGxldCBmb3JtRGF0YSA9IEZvcm1TZXJpYWxpemVVdGlsLnNlcmlhbGl6ZSh0aGlzLmNvbmZpcm1PcmRlckZvcm0pO1xuICAgICAgICAgICAgICAgICAgICBFbGVtZW50TG9hZGluZ0luZGljYXRvclV0aWwuY3JlYXRlKGRvY3VtZW50LmJvZHkpO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmNvbmZpcm1PcmRlcihmb3JtRGF0YSwgZXh0cmFQYXJhbXMpO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbXBvbmVudC5zaG93VmFsaWRhdGlvbigpO1xuICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5hZHllbkNoZWNrb3V0Lm9wdGlvbnMuZW52aXJvbm1lbnQgPT09ICd0ZXN0Jykge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ1BheW1lbnQgZmFpbGVkOiAnLCBzdGF0ZSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9LmJpbmQodGhpcylcbiAgICAgICAgfSk7XG4gICAgICAgIGlmICghaXNPbmVDbGljayAmJiBwYXltZW50TWV0aG9kLnR5cGUgPT09ICdzY2hlbWUnICYmIGFkeWVuQ2hlY2tvdXRPcHRpb25zLmRpc3BsYXlTYXZlQ3JlZGl0Q2FyZE9wdGlvbikge1xuICAgICAgICAgICAgY29uZmlndXJhdGlvbi5lbmFibGVTdG9yZURldGFpbHMgPSB0cnVlO1xuICAgICAgICB9XG4gICAgICAgIGxldCBjb21wb25lbnRTZWxlY3RvciA9IGlzT25lQ2xpY2sgPyBzZWxlY3RvciA6ICcjJyArIHRoaXMuZWwuaWQ7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBjb25zdCBwYXltZW50TWV0aG9kSW5zdGFuY2UgPSB0aGlzLmFkeWVuQ2hlY2tvdXQuY3JlYXRlKHBheW1lbnRNZXRob2QudHlwZSwgY29uZmlndXJhdGlvbik7XG4gICAgICAgICAgICBwYXltZW50TWV0aG9kSW5zdGFuY2UubW91bnQoY29tcG9uZW50U2VsZWN0b3IpO1xuICAgICAgICAgICAgdGhpcy5jb25maXJtRm9ybVN1Ym1pdC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGZ1bmN0aW9uKGV2ZW50KSB7XG4gICAgICAgICAgICAgICAgY29uc3QgZm9ybSA9ICBEb21BY2Nlc3MucXVlcnlTZWxlY3Rvcihkb2N1bWVudCwgJyNjb25maXJtT3JkZXJGb3JtJyk7XG4gICAgICAgICAgICAgICAgaWYgKCFmb3JtLmNoZWNrVmFsaWRpdHkoKSkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgICAgICAgdGhpcy5lbC5wYXJlbnROb2RlLnNjcm9sbEludG9WaWV3KHtcbiAgICAgICAgICAgICAgICAgICAgYmVoYXZpb3I6IFwic21vb3RoXCIsXG4gICAgICAgICAgICAgICAgICAgIGJsb2NrOiAgICBcInN0YXJ0XCIsXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgcGF5bWVudE1ldGhvZEluc3RhbmNlLnN1Ym1pdCgpO1xuICAgICAgICAgICAgfS5iaW5kKHRoaXMpKTtcbiAgICAgICAgfSBjYXRjaCAoZXJyKSB7XG4gICAgICAgICAgICBjb25zb2xlLmVycm9yKHBheW1lbnRNZXRob2QudHlwZSwgZXJyKTtcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIGFwcGVuZEdpZnRjYXJkU3VtbWFyeSgpIHtcbiAgICAgICAgaWYocGFyc2VJbnQoYWR5ZW5DaGVja291dE9wdGlvbnMuZ2lmdGNhcmREaXNjb3VudCwgMTApICYmIHRoaXMuc2hvcHBpbmdDYXJ0U3VtbWFyeUJsb2NrLmxlbmd0aCkge1xuICAgICAgICAgICAgbGV0IHNob3BwaW5nQ2FydFN1bW1hcnlEZXRhaWxzID1cbiAgICAgICAgICAgICAgICAnPGR0IGNsYXNzPVwiY29sLTcgY2hlY2tvdXQtYXNpZGUtc3VtbWFyeS1sYWJlbCBjaGVja291dC1hc2lkZS1zdW1tYXJ5LXRvdGFsIGFkeWVuLWdpZnRjYXJkLXN1bW1hcnlcIj4nICtcbiAgICAgICAgICAgICAgICAgICAgYWR5ZW5DaGVja291dE9wdGlvbnMudHJhbnNsYXRpb25BZHllbkdpZnRjYXJkRGlzY291bnQgK1xuICAgICAgICAgICAgICAgICc8L2R0PicgK1xuICAgICAgICAgICAgICAgICc8ZGQgY2xhc3M9XCJjb2wtNSBjaGVja291dC1hc2lkZS1zdW1tYXJ5LXZhbHVlIGNoZWNrb3V0LWFzaWRlLXN1bW1hcnktdG90YWwgYWR5ZW4tZ2lmdGNhcmQtc3VtbWFyeVwiPicgK1xuICAgICAgICAgICAgICAgICAgICBhZHllbkNoZWNrb3V0T3B0aW9ucy5jdXJyZW5jeVN5bWJvbCArIHRoaXMuZ2lmdGNhcmREaXNjb3VudCArXG4gICAgICAgICAgICAgICAgJzwvZGQ+JyArXG4gICAgICAgICAgICAgICAgJzxkdCBjbGFzcz1cImNvbC03IGNoZWNrb3V0LWFzaWRlLXN1bW1hcnktbGFiZWwgY2hlY2tvdXQtYXNpZGUtc3VtbWFyeS10b3RhbCBhZHllbi1naWZ0Y2FyZC1zdW1tYXJ5XCI+JyArXG4gICAgICAgICAgICAgICAgICAgIGFkeWVuQ2hlY2tvdXRPcHRpb25zLnRyYW5zbGF0aW9uQWR5ZW5HaWZ0Y2FyZFJlbWFpbmluZ0Ftb3VudCArXG4gICAgICAgICAgICAgICAgJzwvZHQ+JyArXG4gICAgICAgICAgICAgICAgJzxkZCBjbGFzcz1cImNvbC01IGNoZWNrb3V0LWFzaWRlLXN1bW1hcnktdmFsdWUgY2hlY2tvdXQtYXNpZGUtc3VtbWFyeS10b3RhbCBhZHllbi1naWZ0Y2FyZC1zdW1tYXJ5XCI+JyArXG4gICAgICAgICAgICAgICAgICAgIGFkeWVuQ2hlY2tvdXRPcHRpb25zLmN1cnJlbmN5U3ltYm9sICsgdGhpcy5yZW1haW5pbmdBbW91bnQgK1xuICAgICAgICAgICAgICAgICc8L2RkPic7XG5cbiAgICAgICAgICAgIHRoaXMuc2hvcHBpbmdDYXJ0U3VtbWFyeUJsb2NrWzBdLmlubmVySFRNTCArPSBzaG9wcGluZ0NhcnRTdW1tYXJ5RGV0YWlscztcbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFNldCB0aGUgYWRkcmVzcyBkZXRhaWxzIGJhc2VkIG9uIHRoZSBwYXNzZWQgZGF0YSBpbiBjb25maXJtLXBheW1lbnQgdHdpZyBmaWxlXG4gICAgICogSWYgbm8gcGhvbmUgbnVtYmVyIGlzIGxpbmtlZCB0byBjdXN0b21lciwgZG8gbm90IHNldCBhZGRyZXNzRGV0YWlscyBhbmQgdXBkYXRlIFByb2R1Y3QgVHlwZVxuICAgICAqXG4gICAgICogQHBhcmFtIGV4dHJhXG4gICAgICovXG4gICAgc2V0QWRkcmVzc0RldGFpbHMoZXh0cmEpIHtcbiAgICAgICAgaWYgKGFjdGl2ZVNoaXBwaW5nQWRkcmVzcy5waG9uZU51bWJlciAhPT0gJycpIHtcbiAgICAgICAgICAgIGV4dHJhLmFkZHJlc3NEZXRhaWxzID0ge1xuICAgICAgICAgICAgICAgIG5hbWU6IHNob3BwZXJEZXRhaWxzLmZpcnN0TmFtZSArICcgJyArIHNob3BwZXJEZXRhaWxzLmxhc3ROYW1lLFxuICAgICAgICAgICAgICAgIGFkZHJlc3NMaW5lMTogYWN0aXZlU2hpcHBpbmdBZGRyZXNzLnN0cmVldCxcbiAgICAgICAgICAgICAgICBjaXR5OiBhY3RpdmVTaGlwcGluZ0FkZHJlc3MuY2l0eSxcbiAgICAgICAgICAgICAgICBwb3N0YWxDb2RlOiBhY3RpdmVTaGlwcGluZ0FkZHJlc3MucG9zdGFsQ29kZSxcbiAgICAgICAgICAgICAgICBjb3VudHJ5Q29kZTogYWN0aXZlU2hpcHBpbmdBZGRyZXNzLmNvdW50cnksXG4gICAgICAgICAgICAgICAgcGhvbmVOdW1iZXI6IGFjdGl2ZVNoaXBwaW5nQWRkcmVzcy5waG9uZU51bWJlclxuICAgICAgICAgICAgfTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGV4dHJhLnByb2R1Y3RUeXBlID0gJ1BheU9ubHknO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIGV4dHJhO1xuICAgIH1cbn1cbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///64429\n");

/***/ }),

/***/ 68645:
/*!*******************************************************************************************************!*\
  !*** ../../../../../../adyen/adyen-shopware6/src/Resources/app/storefront/src/configuration/adyen.js ***!
  \*******************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/*\n *                       ######\n *                       ######\n * ############    ####( ######  #####. ######  ############   ############\n * #############  #####( ######  #####. ######  #############  #############\n *        ######  #####( ######  #####. ######  #####  ######  #####  ######\n * ###### ######  #####( ######  #####. ######  #####  #####   #####  ######\n * ###### ######  #####( ######  #####. ######  #####          #####  ######\n * #############  #############  #############  #############  #####  ######\n *  ############   ############  #############   ############  #####  ######\n *                                      ######\n *                               #############\n *                               ############\n *\n * Adyen Payment Module\n *\n * Copyright (c) 2020 Adyen B.V.\n * This file is open source and available under the MIT license.\n * See the LICENSE file for more info.\n *\n */\n\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ({\n  updatablePaymentMethods: ['scheme', 'ideal', 'sepadirectdebit', 'oneclick', 'dotpay', 'bcmc', 'bcmc_mobile', 'blik', 'eps', 'facilypay_3x', 'facilypay_4x', 'facilypay_6x', 'facilypay_10x', 'facilypay_12x', 'afterpay_default', 'ratepay', 'ratepay_directdebit', 'giftcard', 'paybright', 'affirm', 'multibanco', 'mbway', 'vipps', 'mobilepay', 'wechatpayQR', 'wechatpayWeb', 'paybybank'],\n  componentsWithPayButton: {\n    'applepay': {\n      extra: {},\n      onClick(resolve, reject, self) {\n        if (!self.confirmOrderForm.checkValidity()) {\n          reject();\n          return false;\n        } else {\n          resolve();\n          return true;\n        }\n      }\n    },\n    'googlepay': {\n      extra: {\n        buttonSizeMode: 'fill'\n      },\n      onClick: function (resolve, reject, self) {\n        if (!self.confirmOrderForm.checkValidity()) {\n          reject();\n          return false;\n        } else {\n          resolve();\n          return true;\n        }\n      },\n      onError: function (error, component, self) {\n        if (error.statusCode !== 'CANCELED') {\n          if ('statusMessage' in error) {\n            console.log(error.statusMessage);\n          } else {\n            console.log(error.statusCode);\n          }\n        }\n      }\n    },\n    'paypal': {\n      extra: {},\n      onClick: function (source, event, self) {\n        return self.confirmOrderForm.checkValidity();\n      },\n      onError: function (error, component, self) {\n        component.setStatus('ready');\n        window.location.href = self.errorUrl.toString();\n      },\n      onCancel: function (data, component, self) {\n        component.setStatus('ready');\n        window.location.href = self.errorUrl.toString();\n      },\n      responseHandler: function (plugin, response) {\n        try {\n          response = JSON.parse(response);\n          if (response.isFinal) {\n            location.href = plugin.returnUrl;\n          }\n          // Load Paypal popup window with component.handleAction\n          this.handleAction(response.action);\n        } catch (e) {\n          console.error(e);\n        }\n      }\n    },\n    'amazonpay': {\n      extra: {\n        productType: 'PayAndShip',\n        checkoutMode: 'ProcessOrder',\n        returnUrl: location.href\n      },\n      prePayRedirect: true,\n      sessionKey: 'amazonCheckoutSessionId',\n      onClick: function (resolve, reject, self) {\n        if (!self.confirmOrderForm.checkValidity()) {\n          reject();\n          return false;\n        } else {\n          resolve();\n          return true;\n        }\n      },\n      onError: (error, component) => {\n        console.log(error);\n        component.setStatus('ready');\n      }\n    }\n  },\n  paymentMethodTypeHandlers: {\n    'scheme': 'handler_adyen_cardspaymentmethodhandler',\n    'ideal': 'handler_adyen_idealpaymentmethodhandler',\n    'klarna': 'handler_adyen_klarnapaylaterpaymentmethodhandler',\n    'klarna_account': 'handler_adyen_klarnaaccountpaymentmethodhandler',\n    'klarna_paynow': 'handler_adyen_klarnapaynowpaymentmethodhandler',\n    'ratepay': 'handler_adyen_ratepaypaymentmethodhandler',\n    'ratepay_directdebit': 'handler_adyen_ratepaydirectdebitpaymentmethodhandler',\n    'sepadirectdebit': 'handler_adyen_sepapaymentmethodhandler',\n    'sofort': 'handler_adyen_sofortpaymentmethodhandler',\n    'paypal': 'handler_adyen_paypalpaymentmethodhandler',\n    'oneclick': 'handler_adyen_oneclickpaymentmethodhandler',\n    'giropay': 'handler_adyen_giropaypaymentmethodhandler',\n    'applepay': 'handler_adyen_applepaypaymentmethodhandler',\n    'googlepay': 'handler_adyen_googlepaypaymentmethodhandler',\n    'dotpay': 'handler_adyen_dotpaypaymentmethodhandler',\n    'bcmc': 'handler_adyen_bancontactcardpaymentmethodhandler',\n    'bcmc_mobile': 'handler_adyen_bancontactmobilepaymentmethodhandler',\n    'amazonpay': 'handler_adyen_amazonpaypaymentmethodhandler',\n    'twint': 'handler_adyen_twintpaymentmethodhandler',\n    'eps': 'handler_adyen_epspaymentmethodhandler',\n    'swish': 'handler_adyen_swishpaymentmethodhandler',\n    'alipay': 'handler_adyen_alipaypaymentmethodhandler',\n    'alipay_hk': 'handler_adyen_alipayhkpaymentmethodhandler',\n    'blik': 'handler_adyen_blikpaymentmethodhandler',\n    'clearpay': 'handler_adyen_clearpaypaymentmethodhandler',\n    'facilypay_3x': 'handler_adyen_facilypay3xpaymentmethodhandler',\n    'facilypay_4x': 'handler_adyen_facilypay4xpaymentmethodhandler',\n    'facilypay_6x': 'handler_adyen_facilypay6xpaymentmethodhandler',\n    'facilypay_10x': 'handler_adyen_facilypay10xpaymentmethodhandler',\n    'facilypay_12x': 'handler_adyen_facilypay12xpaymentmethodhandler',\n    'afterpay_default': 'handler_adyen_afterpaydefaultpaymentmethodhandler',\n    'trustly': 'handler_adyen_trustlypaymentmethodhandler',\n    'paysafecard': 'handler_adyen_paysafecardpaymentmethodhandler',\n    'givex': 'handler_adyen_givexgiftcardpaymentmethodhandler',\n    'webshopgiftcard': 'handler_adyen_webshopgiftcardpaymentmethodhandler',\n    'kadowereld': 'handler_adyen_kadowereldgiftcardpaymentmethodhandler',\n    'tcstestgiftcard': 'handler_adyen_tcstestgiftcardpaymentmethodhandler',\n    'albelligiftcard': 'handler_adyen_albelligiftcardpaymentmethodhandler',\n    'bijcadeaucard': 'handler_adyen_bijenkorfgiftcardpaymentmethodhandler',\n    'vvvgiftcard': 'handler_adyen_vvvgiftcardpaymentmethodhandler',\n    'genericgiftcard': 'handler_adyen_genericgiftcardpaymentmethodhandler',\n    'gallgall': 'handler_adyen_gallgallgiftcardpaymentmethodhandler',\n    'hmlingerie': 'handler_adyen_hunkemollerlingeriegiftcardpaymentmethodhandler',\n    'beautycadeaukaart': 'handler_adyen_beautygiftcardpaymentmethodhandler',\n    'svs': 'handler_adyen_svsgiftcardpaymentmethodhandler',\n    'fashioncheque': 'handler_adyen_fashionchequegiftcardpaymentmethodhandler',\n    'decadeaukaart': 'handler_adyen_decadeaukaartgiftcardpaymentmethodhandler',\n    'mbway': 'handler_adyen_mbwaypaymentmethodhandler',\n    'multibanco': 'handler_adyen_multibancopaymentmethodhandler',\n    'wechatpayQR': 'handler_adyen_wechatpayqrpaymentmethodhandler',\n    'wechatpayWeb': 'handler_adyen_wechatpaywebpaymentmethodhandler',\n    'mobilepay': 'handler_adyen_mobilepaypaymentmethodhandler',\n    'vipps': 'handler_adyen_vippspaymentmethodhandler',\n    'affirm': 'handler_adyen_affirmpaymentmethodhandler',\n    'paybright': 'handler_adyen_paybrightpaymentmethodhandler',\n    'paybybank': 'handler_adyen_openbankingpaymentmethodhandler'\n  }\n});//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiNjg2NDUuanMiLCJtYXBwaW5ncyI6Ijs7OztBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBTUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy4uLy4uLy4uLy4uLy4uLy4uL2FkeWVuL2FkeWVuLXNob3B3YXJlNi9zcmMvUmVzb3VyY2VzL2FwcC9zdG9yZWZyb250L3NyYy9jb25maWd1cmF0aW9uL2FkeWVuLmpzPzFjZDQiXSwic291cmNlc0NvbnRlbnQiOlsiLypcbiAqICAgICAgICAgICAgICAgICAgICAgICAjIyMjIyNcbiAqICAgICAgICAgICAgICAgICAgICAgICAjIyMjIyNcbiAqICMjIyMjIyMjIyMjIyAgICAjIyMjKCAjIyMjIyMgICMjIyMjLiAjIyMjIyMgICMjIyMjIyMjIyMjIyAgICMjIyMjIyMjIyMjI1xuICogIyMjIyMjIyMjIyMjIyAgIyMjIyMoICMjIyMjIyAgIyMjIyMuICMjIyMjIyAgIyMjIyMjIyMjIyMjIyAgIyMjIyMjIyMjIyMjI1xuICogICAgICAgICMjIyMjIyAgIyMjIyMoICMjIyMjIyAgIyMjIyMuICMjIyMjIyAgIyMjIyMgICMjIyMjIyAgIyMjIyMgICMjIyMjI1xuICogIyMjIyMjICMjIyMjIyAgIyMjIyMoICMjIyMjIyAgIyMjIyMuICMjIyMjIyAgIyMjIyMgICMjIyMjICAgIyMjIyMgICMjIyMjI1xuICogIyMjIyMjICMjIyMjIyAgIyMjIyMoICMjIyMjIyAgIyMjIyMuICMjIyMjIyAgIyMjIyMgICAgICAgICAgIyMjIyMgICMjIyMjI1xuICogIyMjIyMjIyMjIyMjIyAgIyMjIyMjIyMjIyMjIyAgIyMjIyMjIyMjIyMjIyAgIyMjIyMjIyMjIyMjIyAgIyMjIyMgICMjIyMjI1xuICogICMjIyMjIyMjIyMjIyAgICMjIyMjIyMjIyMjIyAgIyMjIyMjIyMjIyMjIyAgICMjIyMjIyMjIyMjIyAgIyMjIyMgICMjIyMjI1xuICogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICMjIyMjI1xuICogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIyMjIyMjIyMjIyMjI1xuICogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIyMjIyMjIyMjIyMjXG4gKlxuICogQWR5ZW4gUGF5bWVudCBNb2R1bGVcbiAqXG4gKiBDb3B5cmlnaHQgKGMpIDIwMjAgQWR5ZW4gQi5WLlxuICogVGhpcyBmaWxlIGlzIG9wZW4gc291cmNlIGFuZCBhdmFpbGFibGUgdW5kZXIgdGhlIE1JVCBsaWNlbnNlLlxuICogU2VlIHRoZSBMSUNFTlNFIGZpbGUgZm9yIG1vcmUgaW5mby5cbiAqXG4gKi9cblxuZXhwb3J0IGRlZmF1bHQge1xuICAgIHVwZGF0YWJsZVBheW1lbnRNZXRob2RzOiBbXG4gICAgICAgICdzY2hlbWUnLCAnaWRlYWwnLCAnc2VwYWRpcmVjdGRlYml0JywgJ29uZWNsaWNrJywgJ2RvdHBheScsICdiY21jJywgJ2JjbWNfbW9iaWxlJywgJ2JsaWsnLCAnZXBzJywgJ2ZhY2lseXBheV8zeCcsXG4gICAgICAgICdmYWNpbHlwYXlfNHgnLCAnZmFjaWx5cGF5XzZ4JywgJ2ZhY2lseXBheV8xMHgnLCAnZmFjaWx5cGF5XzEyeCcsICdhZnRlcnBheV9kZWZhdWx0JywgJ3JhdGVwYXknLFxuICAgICAgICAncmF0ZXBheV9kaXJlY3RkZWJpdCcsICdnaWZ0Y2FyZCcsICdwYXlicmlnaHQnLCAnYWZmaXJtJywgJ211bHRpYmFuY28nLCAnbWJ3YXknLCAndmlwcHMnLCAnbW9iaWxlcGF5JyxcbiAgICAgICAgJ3dlY2hhdHBheVFSJywgJ3dlY2hhdHBheVdlYicsICdwYXlieWJhbmsnXG4gICAgXSxcbiAgICBjb21wb25lbnRzV2l0aFBheUJ1dHRvbjoge1xuICAgICAgICAnYXBwbGVwYXknOiB7XG4gICAgICAgICAgICBleHRyYToge30sXG4gICAgICAgICAgICBvbkNsaWNrKHJlc29sdmUsIHJlamVjdCwgc2VsZikge1xuICAgICAgICAgICAgICAgIGlmICghc2VsZi5jb25maXJtT3JkZXJGb3JtLmNoZWNrVmFsaWRpdHkoKSkge1xuICAgICAgICAgICAgICAgICAgICByZWplY3QoKTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHJlc29sdmUoKTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9LFxuICAgICAgICAnZ29vZ2xlcGF5Jzoge1xuICAgICAgICAgICAgZXh0cmE6IHtcbiAgICAgICAgICAgICAgICBidXR0b25TaXplTW9kZTogJ2ZpbGwnLFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIG9uQ2xpY2s6IGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QsIHNlbGYpIHtcbiAgICAgICAgICAgICAgICBpZiAoIXNlbGYuY29uZmlybU9yZGVyRm9ybS5jaGVja1ZhbGlkaXR5KCkpIHtcbiAgICAgICAgICAgICAgICAgICAgcmVqZWN0KCk7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICByZXNvbHZlKCk7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBvbkVycm9yOiBmdW5jdGlvbihlcnJvciwgY29tcG9uZW50LCBzZWxmKSB7XG4gICAgICAgICAgICAgICAgaWYgKGVycm9yLnN0YXR1c0NvZGUgIT09ICdDQU5DRUxFRCcpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCdzdGF0dXNNZXNzYWdlJyBpbiBlcnJvcikge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coZXJyb3Iuc3RhdHVzTWVzc2FnZSk7XG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhlcnJvci5zdGF0dXNDb2RlKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfSxcbiAgICAgICAgJ3BheXBhbCc6IHtcbiAgICAgICAgICAgIGV4dHJhOiB7fSxcbiAgICAgICAgICAgIG9uQ2xpY2s6IGZ1bmN0aW9uIChzb3VyY2UsIGV2ZW50LCBzZWxmKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHNlbGYuY29uZmlybU9yZGVyRm9ybS5jaGVja1ZhbGlkaXR5KCk7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgb25FcnJvcjogZnVuY3Rpb24oZXJyb3IsIGNvbXBvbmVudCwgc2VsZikge1xuICAgICAgICAgICAgICAgIGNvbXBvbmVudC5zZXRTdGF0dXMoJ3JlYWR5Jyk7XG4gICAgICAgICAgICAgICAgd2luZG93LmxvY2F0aW9uLmhyZWYgPSBzZWxmLmVycm9yVXJsLnRvU3RyaW5nKCk7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgb25DYW5jZWw6IGZ1bmN0aW9uIChkYXRhLCBjb21wb25lbnQsIHNlbGYpIHtcbiAgICAgICAgICAgICAgICBjb21wb25lbnQuc2V0U3RhdHVzKCdyZWFkeScpO1xuICAgICAgICAgICAgICAgIHdpbmRvdy5sb2NhdGlvbi5ocmVmID0gc2VsZi5lcnJvclVybC50b1N0cmluZygpO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHJlc3BvbnNlSGFuZGxlcjogZnVuY3Rpb24gKHBsdWdpbiwgcmVzcG9uc2UpIHtcbiAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgICByZXNwb25zZSA9IEpTT04ucGFyc2UocmVzcG9uc2UpO1xuICAgICAgICAgICAgICAgICAgICBpZiAocmVzcG9uc2UuaXNGaW5hbCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgbG9jYXRpb24uaHJlZiA9IHBsdWdpbi5yZXR1cm5Vcmw7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgLy8gTG9hZCBQYXlwYWwgcG9wdXAgd2luZG93IHdpdGggY29tcG9uZW50LmhhbmRsZUFjdGlvblxuICAgICAgICAgICAgICAgICAgICB0aGlzLmhhbmRsZUFjdGlvbihyZXNwb25zZS5hY3Rpb24pO1xuICAgICAgICAgICAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcihlKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH0sXG4gICAgICAgICdhbWF6b25wYXknOiB7XG4gICAgICAgICAgICBleHRyYToge1xuICAgICAgICAgICAgICAgIHByb2R1Y3RUeXBlOiAnUGF5QW5kU2hpcCcsXG4gICAgICAgICAgICAgICAgY2hlY2tvdXRNb2RlOiAnUHJvY2Vzc09yZGVyJyxcbiAgICAgICAgICAgICAgICByZXR1cm5Vcmw6IGxvY2F0aW9uLmhyZWZcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBwcmVQYXlSZWRpcmVjdDogdHJ1ZSxcbiAgICAgICAgICAgIHNlc3Npb25LZXk6ICdhbWF6b25DaGVja291dFNlc3Npb25JZCcsXG4gICAgICAgICAgICBvbkNsaWNrOiBmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0LCBzZWxmKSB7XG4gICAgICAgICAgICAgICAgaWYgKCFzZWxmLmNvbmZpcm1PcmRlckZvcm0uY2hlY2tWYWxpZGl0eSgpKSB7XG4gICAgICAgICAgICAgICAgICAgIHJlamVjdCgpO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgcmVzb2x2ZSgpO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgb25FcnJvcjogKGVycm9yLCBjb21wb25lbnQpID0+IHtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhlcnJvcik7XG4gICAgICAgICAgICAgICAgY29tcG9uZW50LnNldFN0YXR1cygncmVhZHknKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSxcbiAgICB9LFxuICAgIHBheW1lbnRNZXRob2RUeXBlSGFuZGxlcnM6IHtcbiAgICAgICAgJ3NjaGVtZSc6ICdoYW5kbGVyX2FkeWVuX2NhcmRzcGF5bWVudG1ldGhvZGhhbmRsZXInLFxuICAgICAgICAnaWRlYWwnOiAnaGFuZGxlcl9hZHllbl9pZGVhbHBheW1lbnRtZXRob2RoYW5kbGVyJyxcbiAgICAgICAgJ2tsYXJuYSc6ICdoYW5kbGVyX2FkeWVuX2tsYXJuYXBheWxhdGVycGF5bWVudG1ldGhvZGhhbmRsZXInLFxuICAgICAgICAna2xhcm5hX2FjY291bnQnOiAnaGFuZGxlcl9hZHllbl9rbGFybmFhY2NvdW50cGF5bWVudG1ldGhvZGhhbmRsZXInLFxuICAgICAgICAna2xhcm5hX3BheW5vdyc6ICdoYW5kbGVyX2FkeWVuX2tsYXJuYXBheW5vd3BheW1lbnRtZXRob2RoYW5kbGVyJyxcbiAgICAgICAgJ3JhdGVwYXknOiAnaGFuZGxlcl9hZHllbl9yYXRlcGF5cGF5bWVudG1ldGhvZGhhbmRsZXInLFxuICAgICAgICAncmF0ZXBheV9kaXJlY3RkZWJpdCc6ICdoYW5kbGVyX2FkeWVuX3JhdGVwYXlkaXJlY3RkZWJpdHBheW1lbnRtZXRob2RoYW5kbGVyJyxcbiAgICAgICAgJ3NlcGFkaXJlY3RkZWJpdCc6ICdoYW5kbGVyX2FkeWVuX3NlcGFwYXltZW50bWV0aG9kaGFuZGxlcicsXG4gICAgICAgICdzb2ZvcnQnOiAnaGFuZGxlcl9hZHllbl9zb2ZvcnRwYXltZW50bWV0aG9kaGFuZGxlcicsXG4gICAgICAgICdwYXlwYWwnOiAnaGFuZGxlcl9hZHllbl9wYXlwYWxwYXltZW50bWV0aG9kaGFuZGxlcicsXG4gICAgICAgICdvbmVjbGljayc6ICdoYW5kbGVyX2FkeWVuX29uZWNsaWNrcGF5bWVudG1ldGhvZGhhbmRsZXInLFxuICAgICAgICAnZ2lyb3BheSc6ICdoYW5kbGVyX2FkeWVuX2dpcm9wYXlwYXltZW50bWV0aG9kaGFuZGxlcicsXG4gICAgICAgICdhcHBsZXBheSc6ICdoYW5kbGVyX2FkeWVuX2FwcGxlcGF5cGF5bWVudG1ldGhvZGhhbmRsZXInLFxuICAgICAgICAnZ29vZ2xlcGF5JzogJ2hhbmRsZXJfYWR5ZW5fZ29vZ2xlcGF5cGF5bWVudG1ldGhvZGhhbmRsZXInLFxuICAgICAgICAnZG90cGF5JzogJ2hhbmRsZXJfYWR5ZW5fZG90cGF5cGF5bWVudG1ldGhvZGhhbmRsZXInLFxuICAgICAgICAnYmNtYyc6ICdoYW5kbGVyX2FkeWVuX2JhbmNvbnRhY3RjYXJkcGF5bWVudG1ldGhvZGhhbmRsZXInLFxuICAgICAgICAnYmNtY19tb2JpbGUnOiAnaGFuZGxlcl9hZHllbl9iYW5jb250YWN0bW9iaWxlcGF5bWVudG1ldGhvZGhhbmRsZXInLFxuICAgICAgICAnYW1hem9ucGF5JzogJ2hhbmRsZXJfYWR5ZW5fYW1hem9ucGF5cGF5bWVudG1ldGhvZGhhbmRsZXInLFxuICAgICAgICAndHdpbnQnOiAnaGFuZGxlcl9hZHllbl90d2ludHBheW1lbnRtZXRob2RoYW5kbGVyJyxcbiAgICAgICAgJ2Vwcyc6ICdoYW5kbGVyX2FkeWVuX2Vwc3BheW1lbnRtZXRob2RoYW5kbGVyJyxcbiAgICAgICAgJ3N3aXNoJzogJ2hhbmRsZXJfYWR5ZW5fc3dpc2hwYXltZW50bWV0aG9kaGFuZGxlcicsXG4gICAgICAgICdhbGlwYXknOiAnaGFuZGxlcl9hZHllbl9hbGlwYXlwYXltZW50bWV0aG9kaGFuZGxlcicsXG4gICAgICAgICdhbGlwYXlfaGsnOiAnaGFuZGxlcl9hZHllbl9hbGlwYXloa3BheW1lbnRtZXRob2RoYW5kbGVyJyxcbiAgICAgICAgJ2JsaWsnOiAnaGFuZGxlcl9hZHllbl9ibGlrcGF5bWVudG1ldGhvZGhhbmRsZXInLFxuICAgICAgICAnY2xlYXJwYXknOiAnaGFuZGxlcl9hZHllbl9jbGVhcnBheXBheW1lbnRtZXRob2RoYW5kbGVyJyxcbiAgICAgICAgJ2ZhY2lseXBheV8zeCc6ICdoYW5kbGVyX2FkeWVuX2ZhY2lseXBheTN4cGF5bWVudG1ldGhvZGhhbmRsZXInLFxuICAgICAgICAnZmFjaWx5cGF5XzR4JzogJ2hhbmRsZXJfYWR5ZW5fZmFjaWx5cGF5NHhwYXltZW50bWV0aG9kaGFuZGxlcicsXG4gICAgICAgICdmYWNpbHlwYXlfNngnOiAnaGFuZGxlcl9hZHllbl9mYWNpbHlwYXk2eHBheW1lbnRtZXRob2RoYW5kbGVyJyxcbiAgICAgICAgJ2ZhY2lseXBheV8xMHgnOiAnaGFuZGxlcl9hZHllbl9mYWNpbHlwYXkxMHhwYXltZW50bWV0aG9kaGFuZGxlcicsXG4gICAgICAgICdmYWNpbHlwYXlfMTJ4JzogJ2hhbmRsZXJfYWR5ZW5fZmFjaWx5cGF5MTJ4cGF5bWVudG1ldGhvZGhhbmRsZXInLFxuICAgICAgICAnYWZ0ZXJwYXlfZGVmYXVsdCc6ICdoYW5kbGVyX2FkeWVuX2FmdGVycGF5ZGVmYXVsdHBheW1lbnRtZXRob2RoYW5kbGVyJyxcbiAgICAgICAgJ3RydXN0bHknOiAnaGFuZGxlcl9hZHllbl90cnVzdGx5cGF5bWVudG1ldGhvZGhhbmRsZXInLFxuICAgICAgICAncGF5c2FmZWNhcmQnOiAnaGFuZGxlcl9hZHllbl9wYXlzYWZlY2FyZHBheW1lbnRtZXRob2RoYW5kbGVyJyxcbiAgICAgICAgJ2dpdmV4JzogJ2hhbmRsZXJfYWR5ZW5fZ2l2ZXhnaWZ0Y2FyZHBheW1lbnRtZXRob2RoYW5kbGVyJyxcbiAgICAgICAgJ3dlYnNob3BnaWZ0Y2FyZCc6ICdoYW5kbGVyX2FkeWVuX3dlYnNob3BnaWZ0Y2FyZHBheW1lbnRtZXRob2RoYW5kbGVyJyxcbiAgICAgICAgJ2thZG93ZXJlbGQnOiAnaGFuZGxlcl9hZHllbl9rYWRvd2VyZWxkZ2lmdGNhcmRwYXltZW50bWV0aG9kaGFuZGxlcicsXG4gICAgICAgICd0Y3N0ZXN0Z2lmdGNhcmQnOiAnaGFuZGxlcl9hZHllbl90Y3N0ZXN0Z2lmdGNhcmRwYXltZW50bWV0aG9kaGFuZGxlcicsXG4gICAgICAgICdhbGJlbGxpZ2lmdGNhcmQnOiAnaGFuZGxlcl9hZHllbl9hbGJlbGxpZ2lmdGNhcmRwYXltZW50bWV0aG9kaGFuZGxlcicsXG4gICAgICAgICdiaWpjYWRlYXVjYXJkJzogJ2hhbmRsZXJfYWR5ZW5fYmlqZW5rb3JmZ2lmdGNhcmRwYXltZW50bWV0aG9kaGFuZGxlcicsXG4gICAgICAgICd2dnZnaWZ0Y2FyZCc6ICdoYW5kbGVyX2FkeWVuX3Z2dmdpZnRjYXJkcGF5bWVudG1ldGhvZGhhbmRsZXInLFxuICAgICAgICAnZ2VuZXJpY2dpZnRjYXJkJzogJ2hhbmRsZXJfYWR5ZW5fZ2VuZXJpY2dpZnRjYXJkcGF5bWVudG1ldGhvZGhhbmRsZXInLFxuICAgICAgICAnZ2FsbGdhbGwnOiAnaGFuZGxlcl9hZHllbl9nYWxsZ2FsbGdpZnRjYXJkcGF5bWVudG1ldGhvZGhhbmRsZXInLFxuICAgICAgICAnaG1saW5nZXJpZSc6ICdoYW5kbGVyX2FkeWVuX2h1bmtlbW9sbGVybGluZ2VyaWVnaWZ0Y2FyZHBheW1lbnRtZXRob2RoYW5kbGVyJyxcbiAgICAgICAgJ2JlYXV0eWNhZGVhdWthYXJ0JzogJ2hhbmRsZXJfYWR5ZW5fYmVhdXR5Z2lmdGNhcmRwYXltZW50bWV0aG9kaGFuZGxlcicsXG4gICAgICAgICdzdnMnOiAnaGFuZGxlcl9hZHllbl9zdnNnaWZ0Y2FyZHBheW1lbnRtZXRob2RoYW5kbGVyJyxcbiAgICAgICAgJ2Zhc2hpb25jaGVxdWUnOiAnaGFuZGxlcl9hZHllbl9mYXNoaW9uY2hlcXVlZ2lmdGNhcmRwYXltZW50bWV0aG9kaGFuZGxlcicsXG4gICAgICAgICdkZWNhZGVhdWthYXJ0JzogJ2hhbmRsZXJfYWR5ZW5fZGVjYWRlYXVrYWFydGdpZnRjYXJkcGF5bWVudG1ldGhvZGhhbmRsZXInLFxuICAgICAgICAnbWJ3YXknOiAnaGFuZGxlcl9hZHllbl9tYndheXBheW1lbnRtZXRob2RoYW5kbGVyJyxcbiAgICAgICAgJ211bHRpYmFuY28nOiAnaGFuZGxlcl9hZHllbl9tdWx0aWJhbmNvcGF5bWVudG1ldGhvZGhhbmRsZXInLFxuICAgICAgICAnd2VjaGF0cGF5UVInOiAnaGFuZGxlcl9hZHllbl93ZWNoYXRwYXlxcnBheW1lbnRtZXRob2RoYW5kbGVyJyxcbiAgICAgICAgJ3dlY2hhdHBheVdlYic6ICdoYW5kbGVyX2FkeWVuX3dlY2hhdHBheXdlYnBheW1lbnRtZXRob2RoYW5kbGVyJyxcbiAgICAgICAgJ21vYmlsZXBheSc6ICdoYW5kbGVyX2FkeWVuX21vYmlsZXBheXBheW1lbnRtZXRob2RoYW5kbGVyJyxcbiAgICAgICAgJ3ZpcHBzJzogJ2hhbmRsZXJfYWR5ZW5fdmlwcHNwYXltZW50bWV0aG9kaGFuZGxlcicsXG4gICAgICAgICdhZmZpcm0nOiAnaGFuZGxlcl9hZHllbl9hZmZpcm1wYXltZW50bWV0aG9kaGFuZGxlcicsXG4gICAgICAgICdwYXlicmlnaHQnOiAnaGFuZGxlcl9hZHllbl9wYXlicmlnaHRwYXltZW50bWV0aG9kaGFuZGxlcicsXG4gICAgICAgICdwYXlieWJhbmsnOiAnaGFuZGxlcl9hZHllbl9vcGVuYmFua2luZ3BheW1lbnRtZXRob2RoYW5kbGVyJ1xuICAgIH1cbn1cbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///68645\n");

/***/ }),

/***/ 21738:
/*!**************************************************************************************************************!*\
  !*** ../../../../../../adyen/adyen-shopware6/src/Resources/app/storefront/src/finish/adyen-giving.plugin.js ***!
  \**************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ AdyenGivingPlugin)\n/* harmony export */ });\n/* harmony import */ var src_plugin_system_plugin_class__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! src/plugin-system/plugin.class */ 56285);\n/* harmony import */ var src_helper_dom_access_helper__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! src/helper/dom-access.helper */ 63206);\n/* harmony import */ var src_service_http_client_service__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! src/service/http-client.service */ 48254);\n/* harmony import */ var src_utility_loading_indicator_element_loading_indicator_util__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! src/utility/loading-indicator/element-loading-indicator.util */ 54690);\n/*\n *                       ######\n *                       ######\n * ############    ####( ######  #####. ######  ############   ############\n * #############  #####( ######  #####. ######  #############  #############\n *        ######  #####( ######  #####. ######  #####  ######  #####  ######\n * ###### ######  #####( ######  #####. ######  #####  #####   #####  ######\n * ###### ######  #####( ######  #####. ######  #####          #####  ######\n * #############  #############  #############  #############  #####  ######\n *  ############   ############  #############   ############  #####  ######\n *                                      ######\n *                               #############\n *                               ############\n *\n * Adyen Payment Module\n *\n * Copyright (c) 2022 Adyen N.V.\n * This file is open source and available under the MIT license.\n * See the LICENSE file for more info.\n *\n */\n\n\n\n\n\nclass AdyenGivingPlugin extends src_plugin_system_plugin_class__WEBPACK_IMPORTED_MODULE_0__[\"default\"] {\n  init() {\n    this._client = new src_service_http_client_service__WEBPACK_IMPORTED_MODULE_2__[\"default\"]();\n    this.adyenCheckout = Promise;\n    this.initializeCheckoutComponent().bind(this);\n  }\n  async initializeCheckoutComponent() {\n    const {\n      locale,\n      clientKey,\n      environment\n    } = adyenCheckoutConfiguration;\n    const {\n      currency,\n      values,\n      backgroundUrl,\n      logoUrl,\n      name,\n      description,\n      url\n    } = adyenGivingConfiguration;\n    const ADYEN_CHECKOUT_CONFIG = {\n      locale,\n      clientKey,\n      environment\n    };\n    const ADYEN_GIVING_CONFIG = {\n      amounts: {\n        currency: currency,\n        values: values.split(\",\").map(element => {\n          return Number(element);\n        })\n      },\n      backgroundUrl: backgroundUrl,\n      logoUrl: logoUrl,\n      description: description,\n      name: name,\n      url: url,\n      showCancelButton: true,\n      onDonate: this.handleOnDonate.bind(this),\n      onCancel: this.handleOnCancel.bind(this)\n    };\n    this.adyenCheckout = await AdyenCheckout(ADYEN_CHECKOUT_CONFIG);\n    this.adyenCheckout.create('donation', ADYEN_GIVING_CONFIG).mount('#donation-container');\n  }\n  handleOnDonate(state, component) {\n    const orderId = adyenGivingConfiguration.orderId;\n    let payload = {\n      stateData: JSON.stringify(state.data),\n      orderId\n    };\n    payload.returnUrl = window.location.href;\n    this._client.post(`${adyenGivingConfiguration.donationEndpointUrl}`, JSON.stringify({\n      ...payload\n    }), function (paymentResponse) {\n      if (this._client._request.status !== 200) {\n        component.setStatus(\"error\");\n      } else {\n        component.setStatus(\"success\");\n      }\n    }.bind(this));\n  }\n  handleOnCancel() {\n    let continueActionUrl = adyenGivingConfiguration.continueActionUrl;\n    window.location = continueActionUrl;\n  }\n}//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMjE3MzguanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUVBO0FBRUE7QUFBQTtBQUVBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUVBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSIsInNvdXJjZXMiOlsid2VicGFjazovLy8uLi8uLi8uLi8uLi8uLi8uLi9hZHllbi9hZHllbi1zaG9wd2FyZTYvc3JjL1Jlc291cmNlcy9hcHAvc3RvcmVmcm9udC9zcmMvZmluaXNoL2FkeWVuLWdpdmluZy5wbHVnaW4uanM/MDkwMSJdLCJzb3VyY2VzQ29udGVudCI6WyIvKlxuICogICAgICAgICAgICAgICAgICAgICAgICMjIyMjI1xuICogICAgICAgICAgICAgICAgICAgICAgICMjIyMjI1xuICogIyMjIyMjIyMjIyMjICAgICMjIyMoICMjIyMjIyAgIyMjIyMuICMjIyMjIyAgIyMjIyMjIyMjIyMjICAgIyMjIyMjIyMjIyMjXG4gKiAjIyMjIyMjIyMjIyMjICAjIyMjIyggIyMjIyMjICAjIyMjIy4gIyMjIyMjICAjIyMjIyMjIyMjIyMjICAjIyMjIyMjIyMjIyMjXG4gKiAgICAgICAgIyMjIyMjICAjIyMjIyggIyMjIyMjICAjIyMjIy4gIyMjIyMjICAjIyMjIyAgIyMjIyMjICAjIyMjIyAgIyMjIyMjXG4gKiAjIyMjIyMgIyMjIyMjICAjIyMjIyggIyMjIyMjICAjIyMjIy4gIyMjIyMjICAjIyMjIyAgIyMjIyMgICAjIyMjIyAgIyMjIyMjXG4gKiAjIyMjIyMgIyMjIyMjICAjIyMjIyggIyMjIyMjICAjIyMjIy4gIyMjIyMjICAjIyMjIyAgICAgICAgICAjIyMjIyAgIyMjIyMjXG4gKiAjIyMjIyMjIyMjIyMjICAjIyMjIyMjIyMjIyMjICAjIyMjIyMjIyMjIyMjICAjIyMjIyMjIyMjIyMjICAjIyMjIyAgIyMjIyMjXG4gKiAgIyMjIyMjIyMjIyMjICAgIyMjIyMjIyMjIyMjICAjIyMjIyMjIyMjIyMjICAgIyMjIyMjIyMjIyMjICAjIyMjIyAgIyMjIyMjXG4gKiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIyMjIyMjXG4gKiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAjIyMjIyMjIyMjIyMjXG4gKiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAjIyMjIyMjIyMjIyNcbiAqXG4gKiBBZHllbiBQYXltZW50IE1vZHVsZVxuICpcbiAqIENvcHlyaWdodCAoYykgMjAyMiBBZHllbiBOLlYuXG4gKiBUaGlzIGZpbGUgaXMgb3BlbiBzb3VyY2UgYW5kIGF2YWlsYWJsZSB1bmRlciB0aGUgTUlUIGxpY2Vuc2UuXG4gKiBTZWUgdGhlIExJQ0VOU0UgZmlsZSBmb3IgbW9yZSBpbmZvLlxuICpcbiAqL1xuXG5pbXBvcnQgUGx1Z2luIGZyb20gJ3NyYy9wbHVnaW4tc3lzdGVtL3BsdWdpbi5jbGFzcyc7XG5pbXBvcnQgRG9tQWNjZXNzIGZyb20gJ3NyYy9oZWxwZXIvZG9tLWFjY2Vzcy5oZWxwZXInO1xuaW1wb3J0IEh0dHBDbGllbnQgZnJvbSAnc3JjL3NlcnZpY2UvaHR0cC1jbGllbnQuc2VydmljZSc7XG5pbXBvcnQgRWxlbWVudExvYWRpbmdJbmRpY2F0b3JVdGlsIGZyb20gJ3NyYy91dGlsaXR5L2xvYWRpbmctaW5kaWNhdG9yL2VsZW1lbnQtbG9hZGluZy1pbmRpY2F0b3IudXRpbCc7XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIEFkeWVuR2l2aW5nUGx1Z2luIGV4dGVuZHMgUGx1Z2luIHtcbiAgICBpbml0KCkge1xuICAgICAgICB0aGlzLl9jbGllbnQgPSBuZXcgSHR0cENsaWVudCgpO1xuICAgICAgICB0aGlzLmFkeWVuQ2hlY2tvdXQgPSBQcm9taXNlO1xuICAgICAgICB0aGlzLmluaXRpYWxpemVDaGVja291dENvbXBvbmVudCgpLmJpbmQodGhpcyk7XG4gICAgfVxuXG4gICAgYXN5bmMgaW5pdGlhbGl6ZUNoZWNrb3V0Q29tcG9uZW50ICgpIHtcbiAgICAgICAgY29uc3QgeyBsb2NhbGUsIGNsaWVudEtleSwgZW52aXJvbm1lbnQgfSA9IGFkeWVuQ2hlY2tvdXRDb25maWd1cmF0aW9uO1xuICAgICAgICBjb25zdCB7IGN1cnJlbmN5LCB2YWx1ZXMsIGJhY2tncm91bmRVcmwsXG4gICAgICAgICAgICBsb2dvVXJsLCBuYW1lLCBkZXNjcmlwdGlvbiwgdXJsIH0gPSBhZHllbkdpdmluZ0NvbmZpZ3VyYXRpb247XG5cbiAgICAgICAgY29uc3QgQURZRU5fQ0hFQ0tPVVRfQ09ORklHID0ge1xuICAgICAgICAgICAgbG9jYWxlLFxuICAgICAgICAgICAgY2xpZW50S2V5LFxuICAgICAgICAgICAgZW52aXJvbm1lbnRcbiAgICAgICAgfTtcblxuICAgICAgICBjb25zdCBBRFlFTl9HSVZJTkdfQ09ORklHID0ge1xuICAgICAgICAgICAgYW1vdW50czoge1xuICAgICAgICAgICAgICAgIGN1cnJlbmN5OiBjdXJyZW5jeSxcbiAgICAgICAgICAgICAgICB2YWx1ZXM6IHZhbHVlcy5zcGxpdChcIixcIikubWFwKGVsZW1lbnQgPT4ge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gTnVtYmVyKGVsZW1lbnQpO1xuICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgYmFja2dyb3VuZFVybDogYmFja2dyb3VuZFVybCxcbiAgICAgICAgICAgIGxvZ29Vcmw6IGxvZ29VcmwsXG4gICAgICAgICAgICBkZXNjcmlwdGlvbjogZGVzY3JpcHRpb24sXG4gICAgICAgICAgICBuYW1lOiBuYW1lLFxuICAgICAgICAgICAgdXJsOiB1cmwsXG4gICAgICAgICAgICBzaG93Q2FuY2VsQnV0dG9uOiB0cnVlLFxuICAgICAgICAgICAgb25Eb25hdGU6IHRoaXMuaGFuZGxlT25Eb25hdGUuYmluZCh0aGlzKSxcbiAgICAgICAgICAgIG9uQ2FuY2VsOiB0aGlzLmhhbmRsZU9uQ2FuY2VsLmJpbmQodGhpcylcbiAgICAgICAgfVxuXG4gICAgICAgIHRoaXMuYWR5ZW5DaGVja291dCA9IGF3YWl0IEFkeWVuQ2hlY2tvdXQoQURZRU5fQ0hFQ0tPVVRfQ09ORklHKTtcbiAgICAgICAgdGhpcy5hZHllbkNoZWNrb3V0LmNyZWF0ZSgnZG9uYXRpb24nLCBBRFlFTl9HSVZJTkdfQ09ORklHKS5tb3VudCgnI2RvbmF0aW9uLWNvbnRhaW5lcicpO1xuICAgIH1cblxuICAgIGhhbmRsZU9uRG9uYXRlKHN0YXRlLCBjb21wb25lbnQpIHtcbiAgICAgICAgY29uc3Qgb3JkZXJJZCA9IGFkeWVuR2l2aW5nQ29uZmlndXJhdGlvbi5vcmRlcklkO1xuICAgICAgICBsZXQgcGF5bG9hZCA9IHtzdGF0ZURhdGE6IEpTT04uc3RyaW5naWZ5KHN0YXRlLmRhdGEpLCBvcmRlcklkfTtcbiAgICAgICAgcGF5bG9hZC5yZXR1cm5VcmwgPSB3aW5kb3cubG9jYXRpb24uaHJlZjtcblxuICAgICAgICB0aGlzLl9jbGllbnQucG9zdChcbiAgICAgICAgICAgIGAke2FkeWVuR2l2aW5nQ29uZmlndXJhdGlvbi5kb25hdGlvbkVuZHBvaW50VXJsfWAsXG4gICAgICAgICAgICBKU09OLnN0cmluZ2lmeSh7Li4ucGF5bG9hZH0pLFxuICAgICAgICAgICAgZnVuY3Rpb24gKHBheW1lbnRSZXNwb25zZSkge1xuICAgICAgICAgICAgICAgIGlmICh0aGlzLl9jbGllbnQuX3JlcXVlc3Quc3RhdHVzICE9PSAyMDApIHtcbiAgICAgICAgICAgICAgICAgICAgY29tcG9uZW50LnNldFN0YXR1cyhcImVycm9yXCIpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgY29tcG9uZW50LnNldFN0YXR1cyhcInN1Y2Nlc3NcIik7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfS5iaW5kKHRoaXMpXG4gICAgICAgICk7XG4gICAgfVxuXG4gICAgaGFuZGxlT25DYW5jZWwoKSB7XG4gICAgICAgIGxldCBjb250aW51ZUFjdGlvblVybCA9IGFkeWVuR2l2aW5nQ29uZmlndXJhdGlvbi5jb250aW51ZUFjdGlvblVybDtcbiAgICAgICAgd2luZG93LmxvY2F0aW9uID0gY29udGludWVBY3Rpb25Vcmw7XG4gICAgfVxufVxuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///21738\n");

/***/ }),

/***/ 64499:
/*!**********************************************************************************************************************!*\
  !*** ../../../../../../adyen/adyen-shopware6/src/Resources/app/storefront/src/finish/adyen-success-action.plugin.js ***!
  \**********************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ AdyenSuccessActionPlugin)\n/* harmony export */ });\n/* harmony import */ var src_plugin_system_plugin_class__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! src/plugin-system/plugin.class */ 56285);\n/* harmony import */ var src_helper_dom_access_helper__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! src/helper/dom-access.helper */ 63206);\n/* harmony import */ var src_utility_loading_indicator_element_loading_indicator_util__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! src/utility/loading-indicator/element-loading-indicator.util */ 54690);\n/*\n *                       ######\n *                       ######\n * ############    ####( ######  #####. ######  ############   ############\n * #############  #####( ######  #####. ######  #############  #############\n *        ######  #####( ######  #####. ######  #####  ######  #####  ######\n * ###### ######  #####( ######  #####. ######  #####  #####   #####  ######\n * ###### ######  #####( ######  #####. ######  #####          #####  ######\n * #############  #############  #############  #############  #####  ######\n *  ############   ############  #############   ############  #####  ######\n *                                      ######\n *                               #############\n *                               ############\n *\n * Adyen Payment Module\n *\n * Copyright (c) 2022 Adyen N.V.\n * This file is open source and available under the MIT license.\n * See the LICENSE file for more info.\n *\n */\n\n\n\n\nclass AdyenSuccessActionPlugin extends src_plugin_system_plugin_class__WEBPACK_IMPORTED_MODULE_0__[\"default\"] {\n  init() {\n    this.adyenCheckout = Promise;\n    this.initializeCheckoutComponent().bind(this);\n  }\n  async initializeCheckoutComponent() {\n    const {\n      locale,\n      clientKey,\n      environment\n    } = adyenCheckoutConfiguration;\n    const {\n      action\n    } = adyenSuccessActionConfiguration;\n    const ADYEN_CHECKOUT_CONFIG = {\n      locale,\n      clientKey,\n      environment\n    };\n    this.adyenCheckout = await AdyenCheckout(ADYEN_CHECKOUT_CONFIG);\n    this.adyenCheckout.createFromAction(JSON.parse(action)).mount('#success-action-container');\n  }\n}//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiNjQ0OTkuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7OztBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy4uLy4uLy4uLy4uLy4uLy4uL2FkeWVuL2FkeWVuLXNob3B3YXJlNi9zcmMvUmVzb3VyY2VzL2FwcC9zdG9yZWZyb250L3NyYy9maW5pc2gvYWR5ZW4tc3VjY2Vzcy1hY3Rpb24ucGx1Z2luLmpzPzA5YjAiXSwic291cmNlc0NvbnRlbnQiOlsiLypcbiAqICAgICAgICAgICAgICAgICAgICAgICAjIyMjIyNcbiAqICAgICAgICAgICAgICAgICAgICAgICAjIyMjIyNcbiAqICMjIyMjIyMjIyMjIyAgICAjIyMjKCAjIyMjIyMgICMjIyMjLiAjIyMjIyMgICMjIyMjIyMjIyMjIyAgICMjIyMjIyMjIyMjI1xuICogIyMjIyMjIyMjIyMjIyAgIyMjIyMoICMjIyMjIyAgIyMjIyMuICMjIyMjIyAgIyMjIyMjIyMjIyMjIyAgIyMjIyMjIyMjIyMjI1xuICogICAgICAgICMjIyMjIyAgIyMjIyMoICMjIyMjIyAgIyMjIyMuICMjIyMjIyAgIyMjIyMgICMjIyMjIyAgIyMjIyMgICMjIyMjI1xuICogIyMjIyMjICMjIyMjIyAgIyMjIyMoICMjIyMjIyAgIyMjIyMuICMjIyMjIyAgIyMjIyMgICMjIyMjICAgIyMjIyMgICMjIyMjI1xuICogIyMjIyMjICMjIyMjIyAgIyMjIyMoICMjIyMjIyAgIyMjIyMuICMjIyMjIyAgIyMjIyMgICAgICAgICAgIyMjIyMgICMjIyMjI1xuICogIyMjIyMjIyMjIyMjIyAgIyMjIyMjIyMjIyMjIyAgIyMjIyMjIyMjIyMjIyAgIyMjIyMjIyMjIyMjIyAgIyMjIyMgICMjIyMjI1xuICogICMjIyMjIyMjIyMjIyAgICMjIyMjIyMjIyMjIyAgIyMjIyMjIyMjIyMjIyAgICMjIyMjIyMjIyMjIyAgIyMjIyMgICMjIyMjI1xuICogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICMjIyMjI1xuICogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIyMjIyMjIyMjIyMjI1xuICogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIyMjIyMjIyMjIyMjXG4gKlxuICogQWR5ZW4gUGF5bWVudCBNb2R1bGVcbiAqXG4gKiBDb3B5cmlnaHQgKGMpIDIwMjIgQWR5ZW4gTi5WLlxuICogVGhpcyBmaWxlIGlzIG9wZW4gc291cmNlIGFuZCBhdmFpbGFibGUgdW5kZXIgdGhlIE1JVCBsaWNlbnNlLlxuICogU2VlIHRoZSBMSUNFTlNFIGZpbGUgZm9yIG1vcmUgaW5mby5cbiAqXG4gKi9cblxuaW1wb3J0IFBsdWdpbiBmcm9tICdzcmMvcGx1Z2luLXN5c3RlbS9wbHVnaW4uY2xhc3MnO1xuaW1wb3J0IERvbUFjY2VzcyBmcm9tICdzcmMvaGVscGVyL2RvbS1hY2Nlc3MuaGVscGVyJztcbmltcG9ydCBFbGVtZW50TG9hZGluZ0luZGljYXRvclV0aWwgZnJvbSAnc3JjL3V0aWxpdHkvbG9hZGluZy1pbmRpY2F0b3IvZWxlbWVudC1sb2FkaW5nLWluZGljYXRvci51dGlsJztcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgQWR5ZW5TdWNjZXNzQWN0aW9uUGx1Z2luIGV4dGVuZHMgUGx1Z2luIHtcbiAgICBpbml0KCkge1xuICAgICAgICB0aGlzLmFkeWVuQ2hlY2tvdXQgPSBQcm9taXNlO1xuICAgICAgICB0aGlzLmluaXRpYWxpemVDaGVja291dENvbXBvbmVudCgpLmJpbmQodGhpcyk7XG4gICAgfVxuXG4gICAgYXN5bmMgaW5pdGlhbGl6ZUNoZWNrb3V0Q29tcG9uZW50ICgpIHtcbiAgICAgICAgY29uc3QgeyBsb2NhbGUsIGNsaWVudEtleSwgZW52aXJvbm1lbnQgfSA9IGFkeWVuQ2hlY2tvdXRDb25maWd1cmF0aW9uO1xuICAgICAgICBjb25zdCB7IGFjdGlvbiB9ID0gYWR5ZW5TdWNjZXNzQWN0aW9uQ29uZmlndXJhdGlvbjtcblxuICAgICAgICBjb25zdCBBRFlFTl9DSEVDS09VVF9DT05GSUcgPSB7XG4gICAgICAgICAgICBsb2NhbGUsXG4gICAgICAgICAgICBjbGllbnRLZXksXG4gICAgICAgICAgICBlbnZpcm9ubWVudFxuICAgICAgICB9O1xuXG4gICAgICAgIHRoaXMuYWR5ZW5DaGVja291dCA9IGF3YWl0IEFkeWVuQ2hlY2tvdXQoQURZRU5fQ0hFQ0tPVVRfQ09ORklHKTtcbiAgICAgICAgdGhpcy5hZHllbkNoZWNrb3V0LmNyZWF0ZUZyb21BY3Rpb24oSlNPTi5wYXJzZShhY3Rpb24pKS5tb3VudCgnI3N1Y2Nlc3MtYWN0aW9uLWNvbnRhaW5lcicpO1xuICAgIH1cbn1cbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///64499\n");

/***/ }),

/***/ 16862:
/*!****************************************************************************************!*\
  !*** ../../../../../../adyen/adyen-shopware6/src/Resources/app/storefront/src/main.js ***!
  \****************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _cart_cart_plugin__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./cart/cart.plugin */ 35717);\n/* harmony import */ var _checkout_confirm_order_plugin__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./checkout/confirm-order.plugin */ 64429);\n/* harmony import */ var _finish_adyen_giving_plugin__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./finish/adyen-giving.plugin */ 21738);\n/* harmony import */ var _finish_adyen_success_action_plugin__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./finish/adyen-success-action.plugin */ 64499);\n// Import all necessary Storefront plugins and scss files\n\n\n\n\n\n// Register them via the existing PluginManager\nconst PluginManager = window.PluginManager;\nPluginManager.register('CartPlugin', _cart_cart_plugin__WEBPACK_IMPORTED_MODULE_0__[\"default\"], '#adyen-giftcards-container');\nPluginManager.register('ConfirmOrderPlugin', _checkout_confirm_order_plugin__WEBPACK_IMPORTED_MODULE_1__[\"default\"], '#adyen-payment-checkout-mask');\nPluginManager.register('AdyenGivingPlugin', _finish_adyen_giving_plugin__WEBPACK_IMPORTED_MODULE_2__[\"default\"], '#adyen-giving-container');\nPluginManager.register('AdyenSuccessAction', _finish_adyen_success_action_plugin__WEBPACK_IMPORTED_MODULE_3__[\"default\"], '#adyen-success-action-container');//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMTY4NjIuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSIsInNvdXJjZXMiOlsid2VicGFjazovLy8uLi8uLi8uLi8uLi8uLi8uLi9hZHllbi9hZHllbi1zaG9wd2FyZTYvc3JjL1Jlc291cmNlcy9hcHAvc3RvcmVmcm9udC9zcmMvbWFpbi5qcz80ZDU2Il0sInNvdXJjZXNDb250ZW50IjpbIi8vIEltcG9ydCBhbGwgbmVjZXNzYXJ5IFN0b3JlZnJvbnQgcGx1Z2lucyBhbmQgc2NzcyBmaWxlc1xuaW1wb3J0IENhcnRQbHVnaW4gZnJvbSAnLi9jYXJ0L2NhcnQucGx1Z2luJztcbmltcG9ydCBDb25maXJtT3JkZXJQbHVnaW4gZnJvbSAnLi9jaGVja291dC9jb25maXJtLW9yZGVyLnBsdWdpbic7XG5pbXBvcnQgQWR5ZW5HaXZpbmdQbHVnaW4gZnJvbSAnLi9maW5pc2gvYWR5ZW4tZ2l2aW5nLnBsdWdpbic7XG5pbXBvcnQgQWR5ZW5TdWNjZXNzQWN0aW9uIGZyb20gJy4vZmluaXNoL2FkeWVuLXN1Y2Nlc3MtYWN0aW9uLnBsdWdpbic7XG5cbi8vIFJlZ2lzdGVyIHRoZW0gdmlhIHRoZSBleGlzdGluZyBQbHVnaW5NYW5hZ2VyXG5jb25zdCBQbHVnaW5NYW5hZ2VyID0gd2luZG93LlBsdWdpbk1hbmFnZXI7XG5QbHVnaW5NYW5hZ2VyLnJlZ2lzdGVyKCdDYXJ0UGx1Z2luJywgQ2FydFBsdWdpbiwgJyNhZHllbi1naWZ0Y2FyZHMtY29udGFpbmVyJyk7XG5QbHVnaW5NYW5hZ2VyLnJlZ2lzdGVyKCdDb25maXJtT3JkZXJQbHVnaW4nLCBDb25maXJtT3JkZXJQbHVnaW4sICcjYWR5ZW4tcGF5bWVudC1jaGVja291dC1tYXNrJyk7XG5QbHVnaW5NYW5hZ2VyLnJlZ2lzdGVyKCdBZHllbkdpdmluZ1BsdWdpbicsIEFkeWVuR2l2aW5nUGx1Z2luLCAnI2FkeWVuLWdpdmluZy1jb250YWluZXInKTtcblBsdWdpbk1hbmFnZXIucmVnaXN0ZXIoJ0FkeWVuU3VjY2Vzc0FjdGlvbicsIEFkeWVuU3VjY2Vzc0FjdGlvbiwgJyNhZHllbi1zdWNjZXNzLWFjdGlvbi1jb250YWluZXInKTtcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///16862\n");

/***/ })

},
/******/ __webpack_require__ => { // webpackRuntimeModules
/******/ var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
/******/ __webpack_require__.O(0, ["vendor-node","vendor-shared"], () => (__webpack_exec__(16862)));
/******/ var __webpack_exports__ = __webpack_require__.O();
/******/ }
]);